[{"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\index.js":"1","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\reportWebVitals.js":"2","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\store.js":"3","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\App.js":"4","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Login.js":"5","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\PrivateRoute.js":"6","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Panel.js":"7","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Equipos.js":"8","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Reglas\\Reglas.js":"9","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\reducers\\index.js":"10","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Main.js":"11","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\MenuAcciones.js":"12","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\MapaOSM.js":"13","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Reglas\\Jobs.js":"14","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Reglas\\NuevaRegla.js":"15","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Reglas\\EditarRegla.js":"16","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Reglas\\VerUnidades.js":"17","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\actions\\usuarioActions.js":"18","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\services\\AuthService.js":"19","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\actions\\tareasActions.js":"20","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\actions\\unidadesActions.js":"21","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\actions\\CMDSActions.js":"22","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\actions\\gruposActions.js":"23","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\wialon\\session.js":"24","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\reducers\\usuarioReducer.js":"25","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\reducers\\tareasReducer.js":"26","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\reducers\\unidadesReducer.js":"27","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\reducers\\gruposReducer.js":"28","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\reducers\\CMDSReducer.js":"29","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\components\\DesktopContainer.js":"30","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\UnidadesMapa.js":"31","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\config\\errores.js":"32","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\types\\index.js":"33","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Menu.js":"34","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\config\\CMDS.js":"35"},{"size":735,"mtime":1612279222562,"results":"36","hashOfConfig":"37"},{"size":375,"mtime":1612279222566,"results":"38","hashOfConfig":"37"},{"size":427,"mtime":1612279222569,"results":"39","hashOfConfig":"37"},{"size":964,"mtime":1614979234607,"results":"40","hashOfConfig":"37"},{"size":1590,"mtime":1614958089020,"results":"41","hashOfConfig":"37"},{"size":2651,"mtime":1614721880796,"results":"42","hashOfConfig":"37"},{"size":1544,"mtime":1614971573692,"results":"43","hashOfConfig":"37"},{"size":13604,"mtime":1614986265449,"results":"44","hashOfConfig":"37"},{"size":18648,"mtime":1614983304216,"results":"45","hashOfConfig":"37"},{"size":456,"mtime":1614699119002,"results":"46","hashOfConfig":"37"},{"size":357,"mtime":1612279222563,"results":"47","hashOfConfig":"37"},{"size":8634,"mtime":1614978973893,"results":"48","hashOfConfig":"37"},{"size":747,"mtime":1614890853650,"results":"49","hashOfConfig":"37"},{"size":3062,"mtime":1614984461746,"results":"50","hashOfConfig":"37"},{"size":7021,"mtime":1614981925751,"results":"51","hashOfConfig":"37"},{"size":8804,"mtime":1614984453879,"results":"52","hashOfConfig":"37"},{"size":7900,"mtime":1614986433891,"results":"53","hashOfConfig":"37"},{"size":901,"mtime":1614699118998,"results":"54","hashOfConfig":"37"},{"size":885,"mtime":1614699118992,"results":"55","hashOfConfig":"37"},{"size":7144,"mtime":1614881809246,"results":"56","hashOfConfig":"37"},{"size":1907,"mtime":1614699118996,"results":"57","hashOfConfig":"37"},{"size":1129,"mtime":1614699118993,"results":"58","hashOfConfig":"37"},{"size":5206,"mtime":1614699118994,"results":"59","hashOfConfig":"37"},{"size":28849,"mtime":1614892154799,"results":"60","hashOfConfig":"37"},{"size":1043,"mtime":1614876018854,"results":"61","hashOfConfig":"37"},{"size":3246,"mtime":1614882097116,"results":"62","hashOfConfig":"37"},{"size":1179,"mtime":1614699119003,"results":"63","hashOfConfig":"37"},{"size":1969,"mtime":1614699119001,"results":"64","hashOfConfig":"37"},{"size":826,"mtime":1614699118999,"results":"65","hashOfConfig":"37"},{"size":547,"mtime":1614971596500,"results":"66","hashOfConfig":"37"},{"size":4149,"mtime":1614898766370,"results":"67","hashOfConfig":"37"},{"size":2075,"mtime":1614699118967,"results":"68","hashOfConfig":"37"},{"size":2768,"mtime":1614880299668,"results":"69","hashOfConfig":"37"},{"size":4234,"mtime":1614981862248,"results":"70","hashOfConfig":"37"},{"size":452,"mtime":1614806210384,"results":"71","hashOfConfig":"37"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},"163ezq1",{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"81","messages":"82","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"83","usedDeprecatedRules":"74"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"86","usedDeprecatedRules":"74"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"89","messages":"90","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"91","messages":"92","errorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"93","messages":"94","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"99","messages":"100","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"103","messages":"104","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"105","messages":"106","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"107","messages":"108","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"109","messages":"110","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"111","messages":"112","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"113","messages":"114","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"115","messages":"116","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"117","messages":"118","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"119","messages":"120","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"121","messages":"122","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"123","usedDeprecatedRules":"74"},{"filePath":"124","messages":"125","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"126","messages":"127","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"128","messages":"129","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"130","messages":"131","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"132","messages":"133","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"134","messages":"135","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"136","messages":"137","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"138","usedDeprecatedRules":"74"},{"filePath":"139","messages":"140","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"141","messages":"142","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"143","messages":"144","errorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"145","messages":"146","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\index.js",[],["147","148"],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\reportWebVitals.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\store.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\App.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Login.js",["149"],"import React, { useEffect } from 'react';\r\nimport AuthService from \"../services/AuthService\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { saveTokenAction } from \"../store/actions/usuarioActions\";\r\n\r\n\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst Login = () => {\r\n\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    const token = AuthService.getToken();\r\n    if (token !== null) {\r\n      dispatch(saveTokenAction(token));\r\n      history.push('/');  \r\n    }\r\n  },[])\r\n\r\n  window.onmessage = function (e) {\r\n    var msg = e.data;\r\n    if (typeof msg == \"string\" && msg.indexOf(\"access_hash=\") >= 0) {\r\n      var token = msg.replace(\"access_hash=\", \"\");\r\n      AuthService.saveToken(token);\r\n      dispatch( saveTokenAction(token) );\r\n      history.push('/');\r\n    }\r\n    //acces_type:256\r\n  };\r\n  return (\r\n    <div>\r\n        <video id=\"myVideo\" autoPlay=\"true\" muted loop>\r\n          <source src=\"http://www.intralix.com/videos/Compress-transcode.mp4\" type=\"video/mp4\" />\r\n        </video>\r\n        <iframe\r\n        className=\"content\"\r\n        id=\"iframeInicio\"\r\n        src=\"http://gps.intralix.com/login.html?client_id=myApp&access_type=0xFFFFFFFF&activation_time=0&duration=604800&flags=0xFFFFFFFF&response_type=hash&redirect_uri=http://gps.intralix.com/post_token.html&css_url=https://cocky-brahmagupta-e971ac.netlify.app/login.css\"\r\n        title=\"Inline Frame Example\"\r\n        width=\"500\"\r\n        height=\"500\"\r\n        style={{border: \"transparent\"}}\r\n        ></iframe>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login;\r\n","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\PrivateRoute.js",["150"],"import React, { useState } from 'react';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport wialon from \"../wialon/session\";\r\n\r\nimport AuthService from \"../services/AuthService\";\r\nimport { saveTokenAction, saveUserAction } from \"../store/actions/usuarioActions\";\r\nimport { getGroupsAction } from \"../store/actions/gruposActions\";\r\nimport { getUnitsAction } from \"../store/actions/unidadesActions\";\r\nimport { getJobsAction } from \"../store/actions/tareasActions\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { logoutAction } from \"../store/actions/usuarioActions\";\r\nimport { getCMDSUnitsAction } from \"../store/actions/CMDSActions\";\r\nimport preloader from \"../img/preloader.svg\";\r\n\r\nconst PrivateRoute = ({ component: Component}) => {\r\n\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n\r\n  let wialonObjeto = null;\r\n  const wialonLogin = (token) => {\r\n    wialonObjeto = new wialon(token);\r\n    let iniciar = new Promise((resolve, reject) => {\r\n      wialonObjeto.login( function(data) {\r\n        if (data.error) {\r\n          AuthService.logout();\r\n          dispatch( logoutAction() );\r\n          history.push('/login');\r\n            reject(\"¡Error\");\r\n        } else {\r\n            resolve(\"¡Éxito!\");\r\n        }\r\n      });\r\n\r\n    });\r\n    iniciar.then(() => {\r\n        wialonObjeto.showUnits();\r\n        dispatch(getJobsAction(wialonObjeto));\r\n        dispatch(saveUserAction(wialonObjeto));\r\n        dispatch(getGroupsAction(wialonObjeto));\r\n        dispatch(getUnitsAction(wialonObjeto));\r\n        dispatch(getCMDSUnitsAction(wialonObjeto));\r\n        setLoading(true);\r\n    });\r\n  }\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const loadingGrupos = useSelector(state => state.grupos.loading)\r\n  const loadingUnidades = useSelector(state => state.unidades.loading);\r\n  const loadingJobs = useSelector(state => state.tareas.loading);\r\n  const loadingCMDS = useSelector(state => state.CMDS.loading);\r\n\r\n  const [token] = useState( () => {\r\n    const token2 = AuthService.getToken();\r\n    console.log(\"entro\")\r\n    dispatch(saveTokenAction(token2));\r\n    wialonLogin(token2);\r\n    return token2;\r\n  });\r\n\r\n  return (\r\n    <Route render={\r\n        (props) => (\r\n          token !== null ? \r\n            loading && !loadingGrupos && !loadingUnidades && !loadingJobs && !loadingCMDS ?\r\n              <Component {...props} />\r\n              :\r\n              <img src={preloader} />\r\n          :\r\n            <Redirect to='/login' />\r\n    )} />\r\n\r\n  )\r\n}\r\nexport default PrivateRoute;\r\n//export default connect(mapStateToProps)(PrivateRoute)\r\n","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Panel.js",["151"],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Equipos.js",["152","153","154","155"],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Reglas\\Reglas.js",["156","157","158","159","160","161","162","163","164","165","166"],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\reducers\\index.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Main.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\MenuAcciones.js",["167","168","169"],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\MapaOSM.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Reglas\\Jobs.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Reglas\\NuevaRegla.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Reglas\\EditarRegla.js",["170"],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Reglas\\VerUnidades.js",["171","172","173","174"],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\actions\\usuarioActions.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\services\\AuthService.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\actions\\tareasActions.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\actions\\unidadesActions.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\actions\\CMDSActions.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\actions\\gruposActions.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\wialon\\session.js",["175","176"],"import W from 'wialonjs-api/dist/wialon-src'\r\nexport default class wialon {\r\n    session = null;\r\n    constructor(token){\r\n        this.token = token;\r\n        this.usuario = null;\r\n        this.unidades = [];\r\n        this.grupos = [];\r\n        this.sid = null;\r\n    }\r\n    login(callback){\r\n        let iniciar = new Promise((resolve, reject) => {\r\n            W.debug = true;\r\n            var self = this;\r\n            let session = self.session;\r\n            session = new W.Session('http://gps.intralix.com', {\r\n                eventsTimeout: 5\r\n            });\r\n            session\r\n                .on('lastMessageChanged', function() {\r\n                    //console.log('lastMessageChanged', arguments);\r\n                })\r\n                .on('positionChanged', function() {\r\n                    //console.log('positionChanged', arguments);\r\n                })\r\n                .on('itemChanged', function() {\r\n                    //console.log('itemChanged', arguments);\r\n                })\r\n                .on('itemDeleted', function() {\r\n                    //console.log('itemDeleted', arguments);\r\n                });\r\n            const StorageSID = localStorage.getItem('sid');\r\n            if (!StorageSID) {\r\n                session.execute('core/use_auth_hash', {authHash: this.token}, function(data) {\r\n                    var params = {\r\n                        params:{\"operateAs\":\"\",continueCurrentSession:true,checkService:\"auto.wialon_web.0\",restore:1,appName:\"myApp\"},\r\n                        sid:  session.getSid()\r\n                    }\r\n                    session.execute('core/duplicate', params, function(data) {\r\n                        //{\"operateAs\":\"\",\"continueCurrentSession\":true,\"checkService\":\"auto.wialon_web.0\",\"restore\":1,\"appName\":\"myApp\"}\r\n                        localStorage.setItem('sid', session.getSid());\r\n                        self.sid = session.getSid();\r\n                        self.usuario = data;\r\n                        /**inicio */\r\n                        var params = {spec:[{'type': 'type', 'data': 'avl_unit', 'flags': 0x401, 'mode': 0}]};\r\n                        // load items to current session\r\n                        session.execute('core/update_data_flags', params, function (data) {\r\n                            self.session = session;\r\n                            if (data.error) {\r\n                                reject(\"¡Error\");\r\n                                callback(data);\r\n                            } else {\r\n                                resolve(\"¡Éxito!\");\r\n                                callback(data);\r\n                            }\r\n                        });\r\n                    });\r\n                });\r\n            }else{\r\n                self.sid = StorageSID;\r\n                var params = {\r\n                    params:{\r\n                        \"operateAs\":\"\",\r\n                        \"continueCurrentSession\":true,\r\n                        \"checkService\":\"auto.wialon_web.0\",\r\n                        \"restore\":1,\r\n                        \"appName\":\"myApp\"\r\n                    },\r\n                    sid: self.sid\r\n                }\r\n                session.execute('core/duplicate', params, function(data) {\r\n                    localStorage.setItem('sid', session.getSid());\r\n                    self.sid = session.getSid();\r\n                    self.usuario = data;\r\n                    /**inicio */\r\n                    var params = {spec:[{'type': 'type', 'data': 'avl_unit', 'flags': 0x401, 'mode': 0}]};\r\n                    // load items to current session\r\n                    session.execute('core/update_data_flags', params, function (data) {\r\n                        self.session = session;\r\n                        if (data.error) {\r\n                            reject(\"¡Error\");\r\n                            callback(data);\r\n                        } else {\r\n                            resolve(\"¡Éxito!\");\r\n                            callback(data);\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n\r\n        });\r\n\r\n        iniciar.then(() => {\r\n            //console.log(this.session);\r\n        });\r\n    }\r\n    showUnits(){\r\n        this.unidades = this.session.getItems() === undefined ? [] : this.session.getItems();\r\n        this.unidades.filter(unidad => (unidad.lmsg !== null || unidad.lmsg !== undefined))\r\n    }\r\n    getCMDS(callback){\r\n        //obtener lista de comandos\r\n        const self = this;\r\n        new Promise(()=>{\r\n            var params = {\r\n                \"params\" : [],\r\n                \"sid\": self.sid\r\n            }\r\n            self.unidades.forEach(unidad => {\r\n                params.params.push(\r\n                {\r\n                    \"svc\":\"core/search_item\",\r\n                    \"params\":{\r\n                        \"id\":unidad.id,\r\n                        \"flags\":4294967295\r\n                    }\r\n                })\r\n            });\r\n            self.session.execute('core/batch&sid=' + self.sid, params, function(data) {\r\n                console.log(\"cmds\");\r\n                console.log(data);\r\n                if (data.error) {\r\n                    callback(data);\r\n                } else {\r\n                    const unidadesCMDS = [];\r\n                    data.forEach(unidad => {\r\n                        if (unidad.item.cmds !== undefined) {\r\n                            const fecha = ( unidad.item.pos !== null ? obtenerFecha(unidad.item.pos.t) : \"00/00/0000\");\r\n                            unidadesCMDS.push({\r\n                                fecha:fecha,\r\n                                pos: unidad.item.pos,\r\n                                id:unidad.item.id,\r\n                                n:unidad.item.nm,\r\n                                cmds:unidad.item.cmds\r\n                            });\r\n                            /*\r\n                            unidad.item.cmds.forEach(comando => {\r\n                                if (comando.n === \"Posición\") {unidadesCMDS\r\n                                    console.log(unidad);\r\n                                    //console.log(unidad.item.nm);\r\n                                    console.log(comando);\r\n                                }\r\n                            });\r\n                            */\r\n                        }\r\n                    });\r\n                    callback(unidadesCMDS);\r\n                }\r\n            });\r\n        })\r\n    }\r\n    //\r\n    getJobs(callback){\r\n        const self = this;\r\n        new Promise(() => {\r\n            var params = {\r\n                params:{\r\n                    \"itemId\":105\r\n                }\r\n            };\r\n            self.session.execute('resource/get_job_data', params, function (data) {\r\n                if (data.error) {\r\n                    callback(data);\r\n                } else {\r\n                    const reglasArray = [];\r\n                    data = data.filter( job => job.act.t === \"exec_unit_cmd\" )\r\n                    data.forEach(tarea => {\r\n                        const id = tarea.id;\r\n                        const dias = obtenerDias(tarea.sch.w);\r\n                        const nombre = tarea.n;\r\n                        const comando = tarea.act.p.cmd_name;\r\n                        const comandoTipo = tarea.act.p.cmd_type;\r\n                        const unidades = obtenerUnidades(tarea.act.p.units);\r\n                        const hora = obtenerHora(tarea.r);\r\n                        const fecha = obtenerFecha(tarea.at);\r\n                        const estado = tarea.st.e;\r\n                        reglasArray.push({dias,nombre,comando,hora,unidades,estado,id,fecha,comandoTipo})\r\n                    });\r\n                    callback(reglasArray);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    editUnitsJob(id,unidades,callback){\r\n        const self = this;\r\n        new Promise(()=>{\r\n            //obtener la tarea\r\n            var params = {\r\n                params:{\r\n                    \"itemId\":105,\r\n                    \"col\":[id]\r\n                }\r\n            };\r\n            self.session.execute('resource/get_job_data', params, function (data) {\r\n                console.log(data);\r\n                if (data.error) {\r\n                    callback(data);\r\n                } else {\r\n                    //editar tarea\r\n                    data=data[0];\r\n                    const creatorId = self.usuario.user.id\r\n                    data.act.p.units = unidades;\r\n                    Object.assign(data, {itemId: 105,callMode:\"update\"});\r\n                    var params = {\r\n                        params:data\r\n                    };\r\n                    self.session.execute('resource/update_job', params, function (data) {\r\n                        console.log(data);\r\n                        if (data.error) {\r\n                            callback(data);\r\n                        } else {\r\n                            var params = {\r\n                                params:{\r\n                                    \"itemId\":105,\r\n                                    \"col\":[7,8]\r\n                                }\r\n                            };\r\n                            self.session.execute('resource/get_job_data', params, function (data) {\r\n                                if (data.error) {\r\n                                    callback(data);\r\n                                } else {\r\n                                    const reglasArray = [];\r\n                                    data.forEach(tarea => {\r\n                                        const id = tarea.id;\r\n                                        const dias = obtenerDias(tarea.sch.w);\r\n                                        const nombre = tarea.n;\r\n                                        const comando = tarea.act.p.cmd_name;\r\n                                        const comandoTipo = tarea.act.p.cmd_type;\r\n                                        const unidades = obtenerUnidades(tarea.act.p.units);\r\n                                        const hora = obtenerHora(tarea.r);\r\n                                        const fecha = obtenerFecha(tarea.at);\r\n                                        const estado = tarea.st.e;\r\n                                        reglasArray.push({dias,nombre,comando,hora,unidades,estado,id,fecha,comandoTipo})\r\n                                    });\r\n                                    callback(reglasArray);\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        });\r\n    };\r\n    editJob(id,nuevaTarea,callback){\r\n        const self = this;\r\n        new Promise(()=>{\r\n            //obtener la tarea\r\n            var params = {\r\n                params:{\r\n                    \"itemId\":105,\r\n                    \"col\":[id]\r\n                }\r\n            };\r\n            self.session.execute('resource/get_job_data', params, function (data) {\r\n                console.log(data);\r\n                if (data.error) {\r\n                    callback(data);\r\n                } else {\r\n                    //editar tarea\r\n                    data=data[0];\r\n                    const creatorId = self.usuario.user.id;\r\n                    //data.act.p.units = unidades;\r\n                    console.log(nuevaTarea);\r\n                    Object.assign(data, {itemId: 105,callMode:\"update\"});\r\n                    data.n = nuevaTarea.nombreTarea;\r\n                    data.r = \"1 \" + nuevaTarea.Hora;\r\n                    if (nuevaTarea.fecha !== null) data.at = nuevaTarea.fecha;\r\n                    if (nuevaTarea.arrayNuevosDias !== null) {\r\n                        const dias = formatoDiasTarea(nuevaTarea.arrayNuevosDias);\r\n                        data.sch.w = dias;\r\n                    }\r\n                    var params = {\r\n                        params:data\r\n                    };\r\n                    self.session.execute('resource/update_job', params, function (data) {\r\n                        console.log(data);\r\n                        if (data.error) {\r\n                            callback(data);\r\n                        } else {\r\n                            var params = {\r\n                                params:{\r\n                                    \"itemId\":105\r\n                                }\r\n                            };\r\n                            self.session.execute('resource/get_job_data', params, function (data) {\r\n                                if (data.error) {\r\n                                    callback(data);\r\n                                } else {\r\n                                    data = data.filter( job => job.act.t === \"exec_unit_cmd\" )\r\n                                    const reglasArray = [];\r\n                                    data.forEach(tarea => {\r\n                                        const id = tarea.id;\r\n                                        const dias = obtenerDias(tarea.sch.w);\r\n                                        const nombre = tarea.n;\r\n                                        const comando = tarea.act.p.cmd_name;\r\n                                        const comandoTipo = tarea.act.p.cmd_type;\r\n                                        const unidades = obtenerUnidades(tarea.act.p.units);\r\n                                        const hora = obtenerHora(tarea.r);\r\n                                        const fecha = obtenerFecha(tarea.at);\r\n                                        const estado = tarea.st.e;\r\n                                        reglasArray.push({dias,nombre,comando,hora,unidades,estado,id,fecha,comandoTipo})\r\n                                    });\r\n                                    callback(reglasArray);\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        });\r\n    }\r\n    createNewJob(nuevaTarea,callback){\r\n        const self = this;\r\n        new Promise(()=>{\r\n            var data = armarTarea(nuevaTarea);\r\n            console.log(data)\r\n            var params = {\r\n                params:data\r\n            };\r\n            self.session.execute('resource/update_job', params, function (data) {\r\n                console.log(data);\r\n                if (data.error) {\r\n                    callback(data);\r\n                } else {\r\n                    var params = {\r\n                        params:{\r\n                            \"itemId\":105\r\n                        }\r\n                    };\r\n                    self.session.execute('resource/get_job_data', params, function (data) {\r\n                        if (data.error) {\r\n                            callback(data);\r\n                        } else {\r\n                            data = data.filter( job => job.act.t === \"exec_unit_cmd\" )\r\n                            const reglasArray = [];\r\n                            data.forEach(tarea => {\r\n                                const id = tarea.id;\r\n                                const dias = obtenerDias(tarea.sch.w);\r\n                                const nombre = tarea.n;\r\n                                const comando = tarea.act.p.cmd_name;\r\n                                const comandoTipo = tarea.act.p.cmd_type;\r\n                                const unidades = obtenerUnidades(tarea.act.p.units);\r\n                                const hora = obtenerHora(tarea.r);\r\n                                const fecha = obtenerFecha(tarea.at);\r\n                                const estado = tarea.st.e;\r\n                                reglasArray.push({dias,nombre,comando,hora,unidades,estado,id,fecha,comandoTipo});\r\n                            });\r\n                            callback(reglasArray);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        });\r\n    }\r\n    deleteJob(idJob,callback){\r\n        const self = this;\r\n        new Promise(()=>{\r\n            var params = {\r\n                params:{\r\n                    \"id\": idJob,\r\n                    \"itemId\": 105,\r\n                    \"callMode\": \"delete\"\r\n                }\r\n            };\r\n            self.session.execute('resource/update_job', params, function (data) {\r\n                console.log(data);\r\n                if (data.error) {\r\n                    callback(data);\r\n                } else {\r\n                    callback(data);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    deactivateJob(idJob,callback){\r\n        const self = this;\r\n        new Promise(()=>{\r\n            var params = {\r\n                params:{\r\n                    \"id\":idJob,\r\n                    \"e\":0,\r\n                    \"itemId\":105,\r\n                    \"callMode\":\"enable\"\r\n                }\r\n            };\r\n            self.session.execute('resource/update_job', params, function (data) {\r\n                console.log(data);\r\n                if (data.error) {\r\n                    callback(data);\r\n                } else {\r\n                    callback(data);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    activateJob(idJob,callback){\r\n        const self = this;\r\n        new Promise(()=>{\r\n            var params = {\r\n                params:{\r\n                    \"id\":idJob,\r\n                    \"e\":1,\r\n                    \"itemId\":105,\r\n                    \"callMode\":\"enable\"\r\n                }\r\n            };\r\n            self.session.execute('resource/update_job', params, function (data) {\r\n                console.log(data);\r\n                if (data.error) {\r\n                    callback(data);\r\n                } else {\r\n                    callback(data);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    //\r\n    showGroups(callback){\r\n        const self = this;\r\n        new Promise(() => {\r\n            var params = {spec:[{'type': 'type', 'data': 'avl_unit_group', 'flags': 0x411, 'mode': 1}]};\r\n            this.session.execute('core/update_data_flags', params, function (data) {\r\n                self.grupos = data;\r\n                if (data.error) {\r\n                    callback(data);\r\n                } else {\r\n                    callback(data);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    addUnitsGroup(units,IdGroup,callback){\r\n        new Promise(() => {\r\n            const self = this;\r\n            var req = new W.Request('http://gps.intralix.com');\r\n            var params = {\r\n                \"params\":{\r\n                    \"itemId\": IdGroup, \r\n                    \"units\": units\r\n                },\r\n                \"sid\":self.sid\r\n            };\r\n            req.api('unit_group/update_units&sid=' + self.sid, params, function(data) {\r\n                if (data.error) {\r\n                    callback(data);\r\n                } else {\r\n                    let groups = self.session.getItems(\"avl_unit_group\");\r\n                    groups = groups.filter(grupo => (grupo.nm === \"Admin\" || grupo.nm === \"Grupo Desarrollo\") );\r\n                    callback(groups);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    createGroup(units,name,callback){\r\n        new Promise(() => {\r\n            const self = this;\r\n            console.log(self.usuario.user.id);\r\n            const creatorId = self.usuario.user.id\r\n            var req = new W.Request('http://gps.intralix.com');\r\n            var params = {\r\n                \"params\":{\r\n                    \"creatorId\": creatorId, \r\n                    \"name\": name,\r\n                    \"dataFlags\": 1\r\n                },\r\n                \"sid\":self.sid\r\n            };\r\n            req.api('core/create_unit_group&sid=' + self.sid, params, function(data) {\r\n                if (data.error) {\r\n                    callback(data);\r\n                } else {\r\n                    callback(data);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    addUnitsNewGroup(units,IdGroup,callback){\r\n        new Promise(() => {\r\n            const self = this;\r\n            var req = new W.Request('http://gps.intralix.com');\r\n            var params = {\r\n                \"params\":{\r\n                    \"itemId\": IdGroup, \r\n                    \"units\": units\r\n                },\r\n                \"sid\":self.sid\r\n            };\r\n            req.api('unit_group/update_units&sid=' + self.sid, params, function(data) {\r\n                if (data.error) {\r\n                    callback(data);\r\n                } else {\r\n                    callback(data);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    deleteGroup(IdGroup,callback){\r\n        new Promise(() => {\r\n            const self = this;\r\n            var req = new W.Request('http://gps.intralix.com');\r\n            var params = {\r\n                \"params\":{\r\n                    'itemId': IdGroup\r\n                },\r\n                \"sid\":self.sid\r\n            };\r\n            req.api('item/delete_item&sid=' + self.sid, params, function(data) {\r\n                if (data.error) {\r\n                    callback(data);\r\n                } else {\r\n                    callback(data);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    enviarComando(unidades,comandoString,callback){\r\n        const self = this;\r\n        new Promise(() => {\r\n            var params = {\r\n                \"params\" : [],\r\n                \"sid\": self.sid\r\n            }\r\n            unidades.forEach(unidad => {\r\n                params.params.push(\r\n                    {\r\n                        \"svc\":\"unit/exec_cmd\",\r\n                        \"params\":{\r\n                            \"itemId\":unidad,\r\n                            \"commandName\":comandoString,\r\n                            \"linkType\" : \"\",\r\n                            \"param\" : \"\",\r\n                            \"timeout\":0,\r\n                            \"flags\":1\r\n                        }\r\n                    })\r\n            });\r\n            self.session.execute('core/batch&sid=' + self.sid, params, function(data) {\r\n                const arrayError = [];\r\n                for (let i = 0; i < data.length; i++) {\r\n                    const respuesta = data[i];\r\n                    const unidad = unidades[i];\r\n                    if(respuesta.error){\r\n                        arrayError.push(unidad);\r\n                    }\r\n                }\r\n                if (data.error) {\r\n                    callback(data,arrayError);\r\n                } else {\r\n                    callback(data,arrayError);\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\nconst armarTarea = (tarea) => {\r\n    let dias = 0;\r\n    if (tarea.arrayNuevosDias.length > 0) {\r\n        dias = formatoDiasTarea(tarea.arrayNuevosDias);\r\n    }\r\n    var local = new Date();\r\n    var utc = Date.UTC(local.getFullYear(), local.getMonth(), local.getDate(), local.getHours(), local.getMinutes(), local.getSeconds(), local.getMilliseconds());\r\n    var tz = (utc - local.getTime());\r\n    //console.log(utc - local.getTime());\r\n    const tareaNueva = {\r\n        \"n\": tarea.nombreTarea,\r\n        \"d\": tarea.nombreTarea + \" creada desde portal de chapas\",\r\n        \"r\": \"1 \"+tarea.Hora,\r\n        \"at\": tarea.fecha,\r\n        \"tz\": tz,       //verificar\r\n        \"l\": \"es\",\r\n        \"e\": 1,\r\n        \"m\": 0,\r\n        \"sch\": {\r\n            \"f1\": 0,\r\n            \"f2\": 0,\r\n            \"t1\": 0,\r\n            \"t2\": 0,\r\n            \"m\": 0,\r\n            \"y\": 0,\r\n            \"w\": dias          //dias a la semana que se repite\r\n        },\r\n        \"act\": {\r\n            \"t\": \"exec_unit_cmd\",\r\n            \"p\": {\r\n                \"units\": tarea.unidades.join(),\r\n                \"cmd_name\": tarea.cmd.cmd_name,\r\n                \"cmd_type\": tarea.cmd.cmd_type,\r\n                \"cmd_param\": tarea.cmd.cmd_param,\r\n                \"link_type\": \"\",\r\n                \"timeout\": 60\r\n            }\r\n        },\r\n        \"id\": 0,\r\n        \"itemId\": 105,\r\n        \"callMode\": \"create\"\r\n    };\r\n    return tareaNueva;\r\n}\r\nconst obtenerFecha = (fecha) => {\r\n    var a = new Date(fecha * 1000);\r\n    var months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];\r\n    var year = a.getFullYear();\r\n    var month = months[a.getMonth()];\r\n    var date = a.getDate();\r\n    var time = date + ' ' + month + ' ' + year;\r\n    return time;\r\n}\r\n\r\nconst obtenerUnidades = (unidades) => {\r\n    var unidadesArr = unidades.split(',');\r\n    const unidadesR = [];\r\n    unidadesArr.forEach(element => {\r\n        unidadesR.push(parseInt(element))\r\n    });\r\n    return unidadesR;\r\n}\r\nconst obtenerHora = (hora) => {\r\n    var date = hora.substr(2, hora.length);\r\n    return date;\r\n}\r\nconst obtenerDias = (diasJob) => {\r\n    const arrayDias = [];\r\n    arrayDiasJobs.forEach(dia => {\r\n        const diaTemp = diasJob - dia[1];\r\n        if (diaTemp >= 0) {\r\n            arrayDias.push(dia[0]);\r\n            diasJob = diaTemp;\r\n        }\r\n    });\r\n    return arrayDias;\r\n}\r\nconst formatoDiasTarea = (diasJob) => {\r\n    let contadorDias = 0;\r\n    diasJob.forEach(dia => {\r\n        arrayDiasJobs.forEach(DJ => {\r\n            if (dia === DJ[0]) {\r\n                contadorDias += DJ[1];\r\n            }\r\n        });\r\n    });\r\n    return contadorDias;\r\n}\r\nconst arrayDiasJobs = [\r\n    [\"Domingo\",64],\r\n    [\"Sabado\",35],\r\n    [\"Viernes\",16],\r\n    [\"Jueves\",8],\r\n    [\"Miercoles\",4],\r\n    [\"Martes\",2],\r\n    [\"Lunes\",1]\r\n]\r\n\r\n\r\n//Invoke-WebRequest -Uri \"http://gps.intralix.com/wialon/ajax.html?svc=resource/update_job&sid=1f7b5888b31f65221c3ff2a37d9a6243\" `\r\n//-Method \"POST\" `\r\n//-Headers @{\r\n//\"User-Agent\"=\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.182 Safari/537.36\"\r\n//  \"Accept\"=\"*/*\"\r\n//  \"Origin\"=\"http://gps.intralix.com\"\r\n//  \"Referer\"=\"http://gps.intralix.com/wialon/post.html\"\r\n//  \"Accept-Encoding\"=\"gzip, deflate\"\r\n//  \"Accept-Language\"=\"es-419,es;q=0.9,en;q=0.8\"\r\n//  \"Cookie\"=\"_gcl_au=1.1.1601771906.1607701582; _ym_d=1611953260; _ym_uid=1611953260214380465; lang=es; _ga=GA1.1.1504113298.1607701583; _ga_KGT7H4QD6P=GS1.1.1613601284.4.0.1613601291.53; wwp=; _ym_isad=2; sessions=888eeae6ad0ca653329fe58520245d5b%2C44c7832d07bce0ab9e7f57129fc45544%2C1f7b5888b31f65221c3ff2a37d9a6243\"\r\n//} `\r\n//-ContentType \"application/x-www-form-urlencoded\" `\r\n//-Body \"params=%7B%22n%22%3A%22Posici%C3%B3n%20Desarrollo%22%2C%22d%22%3A%22tarea%20prueba%20desarrollo%22%2C%22r%22%3A%222%2018000%22%2C%22at%22%3A1613714400%2C%22tz%22%3A-100160608%2C%22l%22%3A%22es%22%2C%22e%22%3A1%2C%22m%22%3A0%2C%22sch%22%3A%7B%22f1%22%3A0%2C%22f2%22%3A0%2C%22t1%22%3A0%2C%22t2%22%3A0%2C%22m%22%3A0%2C%22y%22%3A0%2C%22w%22%3A0%7D%2C%22act%22%3A%7B%22t%22%3A%22exec_unit_cmd%22%2C%22p%22%3A%7B%22units%22%3A%221734%22%2C%22cmd_name%22%3A%22Posici%C3%B3n%22%2C%22cmd_type%22%3A%22custom_msg%22%2C%22cmd_param%22%3A%22AT%2BGTRTO%3Dgv55w%2C1%2C%2C0%2C%2C%2C%2CFFFF%24%22%2C%22link_type%22%3A%22%22%2C%22timeout%22%3A60%7D%7D%2C%22id%22%3A0%2C%22itemId%22%3A105%2C%22callMode%22%3A%22create%22%7D&sid=1f7b5888b31f65221c3ff2a37d9a6243\"\r\n\r\n/*\r\nrequest\r\n{\r\n    \"n\": \"Posición Desarrollo\",\r\n    \"d\": \"tarea prueba desarrollo\",\r\n    \"r\": \"2 18000\",\r\n    \"at\": 1613714400,\r\n    \"tz\": -100160608,\r\n    \"l\": \"es\",\r\n    \"e\": 1,\r\n    \"m\": 0,\r\n    \"sch\": {\r\n      \"f1\": 0,\r\n      \"f2\": 0,\r\n      \"t1\": 0,\r\n      \"t2\": 0,\r\n      \"m\": 0,\r\n      \"y\": 0,\r\n      \"w\": 0\r\n    },\r\n    \"act\": {\r\n      \"t\": \"exec_unit_cmd\",\r\n      \"p\": {\r\n        \"units\": \"1734\",\r\n        \"cmd_name\": \"Posición\",\r\n        \"cmd_type\": \"custom_msg\",\r\n        \"cmd_param\": \"AT+GTRTO=gv55w,1,,0,,,,FFFF$\",\r\n        \"link_type\": \"\",\r\n        \"timeout\": 60\r\n      }\r\n    },\r\n    \"id\": 0,\r\n    \"itemId\": 105,\r\n    \"callMode\": \"create\"\r\n  }\r\n*/  \r\n/**\r\n * response\r\n[\r\n  7,\r\n  {\r\n    \"id\": 7,\r\n    \"n\": \"Posición Desarrollo\",\r\n    \"d\": \"tarea prueba desarrollo\",\r\n    \"m\": 0,\r\n    \"st\": {\r\n      \"e\": 1,\r\n      \"c\": 0,\r\n      \"l\": 0\r\n    },\r\n    \"act\": \"exec_unit_cmd\",\r\n    \"ct\": 1613757698,\r\n    \"mt\": 1613757698\r\n  }\r\n]\r\n */\r\n\r\n /**varios dias (lunes, miercoles, jueves)\r\n  * request\r\n{\r\n  \"n\": \"Posición desarrollo 2\",\r\n  \"d\": \"Tarea desarrollo 2 unidades\",\r\n  \"r\": \"1 12:00\",\r\n  \"at\": 1613714400,\r\n  \"tz\": -100160608,\r\n  \"l\": \"es\",\r\n  \"e\": 1,\r\n  \"m\": 0,\r\n  \"sch\": {\r\n    \"f1\": 0,\r\n    \"f2\": 0,\r\n    \"t1\": 0,\r\n    \"t2\": 0,\r\n    \"m\": 0,\r\n    \"y\": 0,\r\n    \"w\": 13\r\n  },\r\n  \"act\": {\r\n    \"t\": \"exec_unit_cmd\",\r\n    \"p\": {\r\n      \"units\": \"1028,1447\",\r\n      \"cmd_name\": \"Posición\",\r\n      \"cmd_type\": \"query_pos\",\r\n      \"cmd_param\": \"AT+GTRTO=gv55w,1,,0,,,,FFFF$\",\r\n      \"link_type\": \"\",\r\n      \"timeout\": 60\r\n    }\r\n  },\r\n  \"id\": 0,\r\n  \"itemId\": 105,\r\n  \"callMode\": \"create\"\r\n}\r\n  */\r\n /**\r\n  * response\r\n[\r\n  8,\r\n  {\r\n    \"id\": 8,\r\n    \"n\": \"Posición desarrollo 2\",\r\n    \"d\": \"Tarea desarrollo 2 unidades\",\r\n    \"m\": 0,\r\n    \"st\": {\r\n      \"e\": 1,\r\n      \"c\": 0,\r\n      \"l\": 0\r\n    },\r\n    \"act\": \"exec_unit_cmd\",\r\n    \"ct\": 1613774353,\r\n    \"mt\": 1613774353\r\n  }\r\n]\r\n  */","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\reducers\\usuarioReducer.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\reducers\\tareasReducer.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\reducers\\unidadesReducer.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\reducers\\gruposReducer.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\reducers\\CMDSReducer.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\components\\DesktopContainer.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\UnidadesMapa.js",["177","178"],"import React, { useState } from 'react';\r\nimport { useSelector } from \"react-redux\";\r\nimport { Marker, Popup } from 'react-leaflet'\r\n\r\nconst UnidadesMapa = () => {\r\n\r\n    const jobs = useSelector(state => state.tareas.tareas);\r\n    const temp = jobs.find(job => job.id === 20);\r\n    console.log(temp)\r\n    //3657\r\n    const CMDSUnidades = useSelector(state => state.CMDS.unidadesCMDS);\r\n    let unidades = useSelector(state => state.unidades.unidades);\r\n    unidades = unidades.map(unidad => {\r\n        const unidadCcmd = CMDSUnidades.find(unidadcmd => unidadcmd.id === unidad.id);\r\n        if (unidadCcmd !== undefined) {\r\n            return unidad;\r\n        }\r\n    });\r\n    unidades= unidades.filter( unidad => unidad !== undefined);\r\n    const [unidadesModal] = useState(CMDSUnidades);\r\n    return (\r\n    <>\r\n        {\r\n            unidadesModal.map(unidad => (\r\n                unidad.pos !== null ?\r\n                    (<Marker key={unidad.id + \"M\"} position={[unidad.pos.y,unidad.pos.x]}>\r\n                        <Popup className=\"popupContainer\" >\r\n                            <div className='popupMarker'>\r\n                                Unidad: {unidad.n}\r\n                                <br></br><br></br>\r\n                                <table className=\"table\">\r\n                                    <thead>\r\n                                    <tr>\r\n                                        <th scope=\"col\">Dirección</th>\r\n                                        <th scope=\"col\">Fecha</th>\r\n                                    </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                    <tr>\r\n                                        <td>direccion</td>\r\n                                        <td>{unidad.fecha}</td>\r\n                                    </tr>\r\n                                    </tbody>\r\n                                </table>\r\n                                Tareas\r\n                                <table className=\"table\">\r\n                                    <thead>\r\n                                    <tr>\r\n                                        <th scope=\"col\">Nombre</th>\r\n                                        <th scope=\"col\">Hora</th>\r\n                                        <th scope=\"col\">Recurrencia</th>\r\n                                        <th scope=\"col\">Comando</th>\r\n                                    </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                    {\r\n                                        jobs.map( job => {\r\n                                            return (\r\n                                                job.unidades.find(unidadJob => unidad.id === unidadJob) !== undefined ?\r\n                                                    <tr>\r\n                                                        <td>{job.nombre}</td>\r\n                                                        <td>{job.hora}</td>\r\n                                                        {\r\n                                                            job.dias.length > 0 ?\r\n                                                            <td>{job.dias.join(\", \")}</td>\r\n                                                            :\r\n                                                            <td>fechas</td>\r\n                                                        }\r\n                                                        <td>{job.comando}</td>\r\n                                                    </tr>\r\n                                                :\r\n                                                    null\r\n                                            )\r\n                                        })\r\n                                    }\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                        </Popup>\r\n                    </Marker>)\r\n                :\r\n                    null\r\n            ))\r\n        }\r\n    </>\r\n    );\r\n}\r\nexport default UnidadesMapa;","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\config\\errores.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\types\\index.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Menu.js",["179","180","181","182","183","184","185","186","187","188","189","190"],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\config\\CMDS.js",[],{"ruleId":"191","replacedBy":"192"},{"ruleId":"193","replacedBy":"194"},{"ruleId":"195","severity":1,"message":"196","line":20,"column":5,"nodeType":"197","endLine":20,"endColumn":7,"suggestions":"198"},{"ruleId":"199","severity":1,"message":"200","line":69,"column":15,"nodeType":"201","endLine":69,"endColumn":38},{"ruleId":"202","severity":1,"message":"203","line":9,"column":36,"nodeType":"204","messageId":"205","endLine":9,"endColumn":38},{"ruleId":"195","severity":1,"message":"206","line":31,"column":8,"nodeType":"197","endLine":31,"endColumn":16,"suggestions":"207"},{"ruleId":"202","severity":1,"message":"208","line":42,"column":34,"nodeType":"204","messageId":"209","endLine":42,"endColumn":36},{"ruleId":"202","severity":1,"message":"208","line":58,"column":34,"nodeType":"204","messageId":"209","endLine":58,"endColumn":36},{"ruleId":"202","severity":1,"message":"208","line":120,"column":33,"nodeType":"204","messageId":"209","endLine":120,"endColumn":35},{"ruleId":"210","severity":1,"message":"211","line":21,"column":11,"nodeType":"212","messageId":"213","endLine":21,"endColumn":18},{"ruleId":"202","severity":1,"message":"203","line":26,"column":41,"nodeType":"204","messageId":"205","endLine":26,"endColumn":43},{"ruleId":"202","severity":1,"message":"203","line":27,"column":52,"nodeType":"204","messageId":"205","endLine":27,"endColumn":54},{"ruleId":"210","severity":1,"message":"214","line":54,"column":12,"nodeType":"212","messageId":"213","endLine":54,"endColumn":29},{"ruleId":"195","severity":1,"message":"215","line":64,"column":8,"nodeType":"197","endLine":64,"endColumn":14,"suggestions":"216"},{"ruleId":"217","severity":1,"message":"218","line":83,"column":21,"nodeType":"212","messageId":"219","endLine":83,"endColumn":26},{"ruleId":"217","severity":1,"message":"220","line":84,"column":25,"nodeType":"212","messageId":"219","endLine":84,"endColumn":26},{"ruleId":"217","severity":1,"message":"218","line":104,"column":29,"nodeType":"212","messageId":"219","endLine":104,"endColumn":34},{"ruleId":"217","severity":1,"message":"220","line":105,"column":33,"nodeType":"212","messageId":"219","endLine":105,"endColumn":34},{"ruleId":"202","severity":1,"message":"208","line":165,"column":30,"nodeType":"204","messageId":"209","endLine":165,"endColumn":32},{"ruleId":"199","severity":1,"message":"200","line":387,"column":29,"nodeType":"201","endLine":387,"endColumn":52},{"ruleId":"202","severity":1,"message":"203","line":14,"column":37,"nodeType":"204","messageId":"205","endLine":14,"endColumn":39},{"ruleId":"202","severity":1,"message":"203","line":15,"column":48,"nodeType":"204","messageId":"205","endLine":15,"endColumn":50},{"ruleId":"202","severity":1,"message":"208","line":87,"column":26,"nodeType":"204","messageId":"209","endLine":87,"endColumn":28},{"ruleId":"195","severity":1,"message":"221","line":32,"column":8,"nodeType":"197","endLine":32,"endColumn":10,"suggestions":"222"},{"ruleId":"202","severity":1,"message":"208","line":17,"column":29,"nodeType":"204","messageId":"209","endLine":17,"endColumn":31},{"ruleId":"202","severity":1,"message":"208","line":35,"column":34,"nodeType":"204","messageId":"209","endLine":35,"endColumn":36},{"ruleId":"202","severity":1,"message":"208","line":63,"column":32,"nodeType":"204","messageId":"209","endLine":63,"endColumn":34},{"ruleId":"202","severity":1,"message":"208","line":80,"column":33,"nodeType":"204","messageId":"209","endLine":80,"endColumn":35},{"ruleId":"210","severity":1,"message":"223","line":201,"column":27,"nodeType":"212","messageId":"213","endLine":201,"endColumn":36},{"ruleId":"210","severity":1,"message":"223","line":261,"column":27,"nodeType":"212","messageId":"213","endLine":261,"endColumn":36},{"ruleId":"202","severity":1,"message":"203","line":13,"column":36,"nodeType":"204","messageId":"205","endLine":13,"endColumn":38},{"ruleId":"210","severity":1,"message":"224","line":19,"column":15,"nodeType":"212","messageId":"213","endLine":19,"endColumn":23},{"ruleId":"210","severity":1,"message":"225","line":3,"column":10,"nodeType":"212","messageId":"213","endLine":3,"endColumn":20},{"ruleId":"210","severity":1,"message":"226","line":3,"column":22,"nodeType":"212","messageId":"213","endLine":3,"endColumn":26},{"ruleId":"210","severity":1,"message":"227","line":3,"column":28,"nodeType":"212","messageId":"213","endLine":3,"endColumn":36},{"ruleId":"210","severity":1,"message":"228","line":3,"column":38,"nodeType":"212","messageId":"213","endLine":3,"endColumn":51},{"ruleId":"210","severity":1,"message":"229","line":3,"column":53,"nodeType":"212","messageId":"213","endLine":3,"endColumn":67},{"ruleId":"210","severity":1,"message":"230","line":3,"column":69,"nodeType":"212","messageId":"213","endLine":3,"endColumn":82},{"ruleId":"210","severity":1,"message":"231","line":5,"column":10,"nodeType":"212","messageId":"213","endLine":5,"endColumn":15},{"ruleId":"210","severity":1,"message":"232","line":5,"column":17,"nodeType":"212","messageId":"213","endLine":5,"endColumn":23},{"ruleId":"210","severity":1,"message":"233","line":5,"column":25,"nodeType":"212","messageId":"213","endLine":5,"endColumn":33},{"ruleId":"210","severity":1,"message":"234","line":28,"column":9,"nodeType":"212","messageId":"213","endLine":28,"endColumn":19},{"ruleId":"210","severity":1,"message":"235","line":32,"column":9,"nodeType":"212","messageId":"213","endLine":32,"endColumn":20},{"ruleId":"199","severity":1,"message":"200","line":55,"column":9,"nodeType":"201","endLine":55,"endColumn":52},"no-native-reassign",["236"],"no-negated-in-lhs",["237"],"react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'dispatch' and 'history'. Either include them or remove the dependency array.","ArrayExpression",["238"],"jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","array-callback-return","Array.prototype.map() expects a value to be returned at the end of arrow function.","ArrowFunctionExpression","expectedAtEnd","React Hook useEffect has missing dependencies: 'cofirmDelete' and 'loadingEquipos'. Either include them or remove the dependency array.",["239"],"Array.prototype.map() expects a return value from arrow function.","expectedInside","no-unused-vars","'usuario' is assigned a value but never used.","Identifier","unusedVar","'comandoNuevaRegla' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'jobsModal'. Either include it or remove the dependency array. You can also do a functional update 'setJobsModal(j => ...)' if you only need 'jobsModal' in the 'setJobsModal' call.",["240"],"no-redeclare","'total' is already defined.","redeclared","'i' is already defined.","React Hook useEffect has a missing dependency: 'job'. Either include it or remove the dependency array.",["241"],"'creatorId' is assigned a value but never used.","'unidades' is assigned a value but never used.","'ProSidebar' is defined but never used.","'Menu' is defined but never used.","'MenuItem' is defined but never used.","'SidebarHeader' is defined but never used.","'SidebarContent' is defined but never used.","'SidebarFooter' is defined but never used.","'FaCog' is defined but never used.","'FaLock' is defined but never used.","'FaWrench' is defined but never used.","'outSidebar' is assigned a value but never used.","'openSidebar' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"242","fix":"243"},{"desc":"244","fix":"245"},{"desc":"246","fix":"247"},{"desc":"248","fix":"249"},"Update the dependencies array to be: [dispatch, history]",{"range":"250","text":"251"},"Update the dependencies array to be: [cofirmDelete, grupos, loadingEquipos]",{"range":"252","text":"253"},"Update the dependencies array to be: [jobs, jobsModal]",{"range":"254","text":"255"},"Update the dependencies array to be: [job]",{"range":"256","text":"257"},[527,529],"[dispatch, history]",[1566,1574],"[cofirmDelete, grupos, loadingEquipos]",[2927,2933],"[jobs, jobsModal]",[1459,1461],"[job]"]