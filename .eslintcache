[{"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\index.js":"1","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\reportWebVitals.js":"2","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\store.js":"3","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\App.js":"4","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Login.js":"5","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\PrivateRoute.js":"6","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Panel.js":"7","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Equipos.js":"8","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Reglas\\Reglas.js":"9","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\reducers\\index.js":"10","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Main.js":"11","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\MenuAcciones.js":"12","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\MapaOSM.js":"13","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Reglas\\Jobs.js":"14","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Reglas\\NuevaRegla.js":"15","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Reglas\\EditarRegla.js":"16","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Reglas\\VerUnidades.js":"17","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\actions\\usuarioActions.js":"18","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\services\\AuthService.js":"19","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\actions\\tareasActions.js":"20","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\actions\\unidadesActions.js":"21","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\actions\\CMDSActions.js":"22","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\actions\\gruposActions.js":"23","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\wialon\\session.js":"24","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\reducers\\usuarioReducer.js":"25","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\reducers\\tareasReducer.js":"26","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\reducers\\unidadesReducer.js":"27","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\reducers\\gruposReducer.js":"28","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\reducers\\CMDSReducer.js":"29","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\components\\DesktopContainer.js":"30","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\UnidadesMapa.js":"31","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\config\\errores.js":"32","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\types\\index.js":"33","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Menu.js":"34","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\config\\CMDS.js":"35"},{"size":735,"mtime":1612279222562,"results":"36","hashOfConfig":"37"},{"size":375,"mtime":1612279222566,"results":"38","hashOfConfig":"37"},{"size":427,"mtime":1612279222569,"results":"39","hashOfConfig":"37"},{"size":878,"mtime":1614699118965,"results":"40","hashOfConfig":"37"},{"size":1324,"mtime":1614699118976,"results":"41","hashOfConfig":"37"},{"size":2651,"mtime":1614721880796,"results":"42","hashOfConfig":"37"},{"size":2420,"mtime":1614699118981,"results":"43","hashOfConfig":"37"},{"size":13558,"mtime":1614699876214,"results":"44","hashOfConfig":"37"},{"size":16972,"mtime":1614814592226,"results":"45","hashOfConfig":"37"},{"size":456,"mtime":1614699119002,"results":"46","hashOfConfig":"37"},{"size":357,"mtime":1612279222563,"results":"47","hashOfConfig":"37"},{"size":7746,"mtime":1614699118980,"results":"48","hashOfConfig":"37"},{"size":750,"mtime":1614699118977,"results":"49","hashOfConfig":"37"},{"size":2125,"mtime":1614699118985,"results":"50","hashOfConfig":"37"},{"size":6970,"mtime":1614814686345,"results":"51","hashOfConfig":"37"},{"size":8753,"mtime":1614707883934,"results":"52","hashOfConfig":"37"},{"size":7986,"mtime":1614699118990,"results":"53","hashOfConfig":"37"},{"size":901,"mtime":1614699118998,"results":"54","hashOfConfig":"37"},{"size":885,"mtime":1614699118992,"results":"55","hashOfConfig":"37"},{"size":4102,"mtime":1614814538361,"results":"56","hashOfConfig":"37"},{"size":1907,"mtime":1614699118996,"results":"57","hashOfConfig":"37"},{"size":1129,"mtime":1614699118993,"results":"58","hashOfConfig":"37"},{"size":5206,"mtime":1614699118994,"results":"59","hashOfConfig":"37"},{"size":26531,"mtime":1614813790898,"results":"60","hashOfConfig":"37"},{"size":1045,"mtime":1614699119005,"results":"61","hashOfConfig":"37"},{"size":1507,"mtime":1614814833182,"results":"62","hashOfConfig":"37"},{"size":1179,"mtime":1614699119003,"results":"63","hashOfConfig":"37"},{"size":1969,"mtime":1614699119001,"results":"64","hashOfConfig":"37"},{"size":826,"mtime":1614699118999,"results":"65","hashOfConfig":"37"},{"size":559,"mtime":1614699118966,"results":"66","hashOfConfig":"37"},{"size":2633,"mtime":1614699118991,"results":"67","hashOfConfig":"37"},{"size":2075,"mtime":1614699118967,"results":"68","hashOfConfig":"37"},{"size":2233,"mtime":1614813250106,"results":"69","hashOfConfig":"37"},{"size":2768,"mtime":1614699118978,"results":"70","hashOfConfig":"37"},{"size":452,"mtime":1614806210384,"results":"71","hashOfConfig":"37"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},"163ezq1",{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"83","usedDeprecatedRules":"74"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"86","usedDeprecatedRules":"74"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"91","usedDeprecatedRules":"74"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"100","usedDeprecatedRules":"74"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"107","messages":"108","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"109","usedDeprecatedRules":"74"},{"filePath":"110","messages":"111","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"112","usedDeprecatedRules":"74"},{"filePath":"113","messages":"114","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"115","messages":"116","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"117","messages":"118","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"119","messages":"120","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"121","messages":"122","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"123","messages":"124","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"125","messages":"126","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"127","messages":"128","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"129","messages":"130","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"131","messages":"132","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"133","messages":"134","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"135","messages":"136","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"137","messages":"138","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"139","messages":"140","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"141","messages":"142","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"143","messages":"144","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"145","messages":"146","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"147","messages":"148","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\index.js",[],["149","150"],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\reportWebVitals.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\store.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\App.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Login.js",["151"],"import React, { useEffect } from 'react';\r\nimport AuthService from \"../services/AuthService\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { saveTokenAction } from \"../store/actions/usuarioActions\";\r\n\r\n\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst Login = () => {\r\n\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    const token = AuthService.getToken();\r\n    if (token !== null) {\r\n      dispatch(saveTokenAction(token));\r\n      history.push('/');  \r\n    }\r\n  },[])\r\n\r\n  window.onmessage = function (e) {\r\n    var msg = e.data;\r\n    if (typeof msg == \"string\" && msg.indexOf(\"access_hash=\") >= 0) {\r\n      var token = msg.replace(\"access_hash=\", \"\");\r\n      AuthService.saveToken(token);\r\n      dispatch( saveTokenAction(token) );\r\n      history.push('/');\r\n    }\r\n    //acces_type:256\r\n  };\r\n  return (\r\n    <div>\r\n        <iframe\r\n        id=\"iframeInicio\"\r\n        src=\"http://gps.intralix.com/login.html?client_id=myApp&access_type=0xFFFFFFFF&activation_time=0&duration=604800&flags=0xFFFFFFFF&response_type=hash&redirect_uri=http://gps.intralix.com/post_token.html\"\r\n        title=\"Inline Frame Example\"\r\n        width=\"500\"\r\n        height=\"500\"\r\n        style={{border: \"transparent\"}}\r\n        ></iframe>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login;\r\n","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\PrivateRoute.js",["152"],"import React, { useState } from 'react';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport wialon from \"../wialon/session\";\r\n\r\nimport AuthService from \"../services/AuthService\";\r\nimport { saveTokenAction, saveUserAction } from \"../store/actions/usuarioActions\";\r\nimport { getGroupsAction } from \"../store/actions/gruposActions\";\r\nimport { getUnitsAction } from \"../store/actions/unidadesActions\";\r\nimport { getJobsAction } from \"../store/actions/tareasActions\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { logoutAction } from \"../store/actions/usuarioActions\";\r\nimport { getCMDSUnitsAction } from \"../store/actions/CMDSActions\";\r\nimport preloader from \"../img/preloader.svg\";\r\n\r\nconst PrivateRoute = ({ component: Component}) => {\r\n\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n\r\n  let wialonObjeto = null;\r\n  const wialonLogin = (token) => {\r\n    wialonObjeto = new wialon(token);\r\n    let iniciar = new Promise((resolve, reject) => {\r\n      wialonObjeto.login( function(data) {\r\n        if (data.error) {\r\n          AuthService.logout();\r\n          dispatch( logoutAction() );\r\n          history.push('/login');\r\n            reject(\"¡Error\");\r\n        } else {\r\n            resolve(\"¡Éxito!\");\r\n        }\r\n      });\r\n\r\n    });\r\n    iniciar.then(() => {\r\n        wialonObjeto.showUnits();\r\n        dispatch(getJobsAction(wialonObjeto));\r\n        dispatch(saveUserAction(wialonObjeto));\r\n        dispatch(getGroupsAction(wialonObjeto));\r\n        dispatch(getUnitsAction(wialonObjeto));\r\n        dispatch(getCMDSUnitsAction(wialonObjeto));\r\n        setLoading(true);\r\n    });\r\n  }\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const loadingGrupos = useSelector(state => state.grupos.loading)\r\n  const loadingUnidades = useSelector(state => state.unidades.loading);\r\n  const loadingJobs = useSelector(state => state.tareas.loading);\r\n  const loadingCMDS = useSelector(state => state.CMDS.loading);\r\n\r\n  const [token] = useState( () => {\r\n    const token2 = AuthService.getToken();\r\n    console.log(\"entro\")\r\n    dispatch(saveTokenAction(token2));\r\n    wialonLogin(token2);\r\n    return token2;\r\n  });\r\n\r\n  return (\r\n    <Route render={\r\n        (props) => (\r\n          token !== null ? \r\n            loading && !loadingGrupos && !loadingUnidades && !loadingJobs && !loadingCMDS ?\r\n              <Component {...props} />\r\n              :\r\n              <img src={preloader} />\r\n          :\r\n            <Redirect to='/login' />\r\n    )} />\r\n\r\n  )\r\n}\r\nexport default PrivateRoute;\r\n//export default connect(mapStateToProps)(PrivateRoute)\r\n","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Panel.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Equipos.js",["153","154","155","156"],"import React, { useState, useEffect } from 'react';\r\nimport Main from './Main';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Card, Container, Row, Col, Form, Spinner } from 'react-bootstrap';\r\nimport { FaLock, FaSearch } from 'react-icons/fa';\r\nimport { addUnitsGroupAction, createGroupAction, deleteGroupAction } from \"../store/actions/gruposActions\";\r\n\r\nconst Equipos = () => {\r\n    const dispatch = useDispatch();\r\n    const unidades = useSelector(state => state.usuario.user.unidades);\r\n    const [unidadesModal,setUnidadesModal] = useState(useSelector(state => state.usuario.user.unidades)) \r\n    const grupos = useSelector(state => state.grupos.grupos);\r\n    const loadingEquipos = useSelector(state => state.grupos.loadingEquipos);\r\n    const wialonObject = useSelector(state => state.usuario.user);\r\n    const [ unidadesGrupo, setUnidadesGrupo ] = useState(grupos[0] === undefined ? [] : grupos[0].d.u);\r\n    const [ tituloGrupo, setTituloGrupo ] = useState(grupos[0] === undefined ? \"\" : grupos[0].d.nm);\r\n    const [ idGroup, setIdGroup] = useState(grupos[0] === undefined ? null : grupos[0].d.id);\r\n    const [ flagCreateGroup, setFlagCreateGroup ] = useState(false);\r\n    const [ cofirmDelete, setCofirmDelete ] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (!loadingEquipos) {\r\n            setFlagCreateGroup(false);\r\n            \r\n        }\r\n        if(!cofirmDelete){\r\n            setCofirmDelete(false);\r\n            //setTituloGrupo(grupos[0].d.nm);\r\n            //setUnidadesGrupo(grupos[0].d.u);\r\n        }\r\n    }, [grupos]);\r\n    const drag = e => {\r\n        e.dataTransfer.setData(\"text\", e.target.id);\r\n    }\r\n    const drop = e => {\r\n        e.preventDefault();\r\n        const data = e.dataTransfer.getData(\"text\");\r\n        var repite = unidadesGrupo.filter(unidad => parseInt(data) === unidad );\r\n        if (repite.length <= 0) {\r\n            setUnidadesGrupo([...unidadesGrupo,parseInt(data)]);\r\n        }\r\n        unidades.map(unidadGrupo => {\r\n            const UC = document.getElementById(\"checbokUnidadGrupo\" + unidadGrupo);\r\n            if (UC !== null) {\r\n                if (UC.checked) {\r\n                    repite = unidadesGrupo.filter(unidad => parseInt(unidadGrupo) === unidad );\r\n                    if (repite.length <= 0) {\r\n                        setUnidadesGrupo([...unidadesGrupo,parseInt(unidadGrupo)]);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    const dropUnidades = e => {\r\n        e.preventDefault();\r\n        const data = e.dataTransfer.getData(\"text\");\r\n        let newGrupo = unidadesGrupo.filter(grupo => grupo !== parseInt(data) )\r\n        unidadesGrupo.map(unidad => {\r\n            const UC = document.getElementById(\"checbokUnidadGrupo\" + unidad).checked;\r\n            console.log(UC);\r\n            if (UC) {\r\n                newGrupo = newGrupo.filter(grupo => grupo !== parseInt(unidad) )\r\n            }\r\n        });\r\n        setUnidadesGrupo(newGrupo);\r\n    }\r\n    const allowDrop = e => {\r\n        e.preventDefault();\r\n    }\r\n    const selectGrupo = e => {\r\n        const se = document.getElementById(e.target.id);\r\n        const idGrupo = se.options[se.selectedIndex].id;\r\n        const newGrupo = grupos.filter(grupo => grupo.d.id === parseInt(idGrupo) )\r\n        setUnidadesGrupo(newGrupo[0].d.u);\r\n        setTituloGrupo(newGrupo[0].d.nm);\r\n        setIdGroup(newGrupo[0].d.id);\r\n    };\r\n    const addUnitsGroup = e => {\r\n        e.preventDefault();\r\n        dispatch(addUnitsGroupAction(unidadesGrupo,idGroup,wialonObject));\r\n    }\r\n    const addGroupModal = e => {\r\n        e.preventDefault();\r\n        setFlagCreateGroup(true);\r\n        setTituloGrupo(\"\");\r\n        setUnidadesGrupo([]);\r\n    }\r\n    const cancelGroup = e => {\r\n        e.preventDefault();\r\n        setFlagCreateGroup(false);\r\n        setTituloGrupo(grupos[0].d.nm);\r\n        setUnidadesGrupo(grupos[0].d.u);\r\n    }\r\n    const nameGroupChange = e => {\r\n        e.preventDefault();\r\n        setTituloGrupo(e.target.value);\r\n    }\r\n    const addGroup = e => {\r\n        e.preventDefault();\r\n        dispatch(createGroupAction(unidadesGrupo,tituloGrupo,wialonObject));\r\n    }\r\n    const confirmDelete = e => {\r\n        e.preventDefault();\r\n        setCofirmDelete(true);\r\n    }\r\n    const cancelDelete = e => {\r\n        e.preventDefault();\r\n        setCofirmDelete(false);\r\n    }\r\n    const deleteGroup = e => {\r\n        e.preventDefault();\r\n        dispatch(deleteGroupAction(idGroup,wialonObject));\r\n        setCofirmDelete(false);\r\n    }\r\n    const buscarUnidad = e => {\r\n        e.preventDefault();\r\n        const nombre = e.target.value.toUpperCase();\r\n        const arrayUnidades = [];\r\n        let tempUnidades = unidades;\r\n        tempUnidades.map(unidad => \r\n            {\r\n                if(unidad.nm.toUpperCase().search(nombre) !== -1){\r\n                    arrayUnidades.push({\r\n                        id: unidad.id,\r\n                        nm: unidad.nm\r\n                    });\r\n                }\r\n            }\r\n        );\r\n        setUnidadesModal(arrayUnidades);\r\n    }\r\n    return (\r\n        <Main>\r\n            <Card className=\"text-center\">\r\n                <Card.Header>Grupos</Card.Header>\r\n                <Card.Body>\r\n                    <Card.Title>\r\n                        {\r\n                            tituloGrupo\r\n                        }\r\n                    </Card.Title>\r\n                    <Container>\r\n                        <Row style={{marginBottom:\"20px\"}}>\r\n                            <Col>\r\n                                {\r\n                                    flagCreateGroup ?\r\n                                        <input \r\n                                            id=\"inputGroup-sizing-sm\" \r\n                                            placeholder=\"Nombre del grupo\" \r\n                                            className=\"inputBlack\" \r\n                                            onChange={ e => nameGroupChange(e) }\r\n                                        />\r\n                                    :\r\n                                        (<Form>\r\n                                            <Form.Group controlId=\"exampleForm.SelectCustom\">\r\n                                                <Form.Label>Grupos</Form.Label>\r\n                                                <Form.Control as=\"select\" custom\r\n                                                    onChange={ e => selectGrupo(e) }\r\n                                                >\r\n                                                {\r\n                                                    grupos.map(grupo => (\r\n                                                        <option key={grupo.d.id} id={grupo.d.id} >{grupo.d.nm}</option>\r\n                                                    ))\r\n                                                }\r\n                                                </Form.Control>\r\n                                            </Form.Group>\r\n                                        </Form>)\r\n                                }\r\n                            </Col>\r\n                            <Col>\r\n                                {\r\n                                    flagCreateGroup ?\r\n                                        null\r\n                                    :\r\n                                        <button onClick={ e => confirmDelete(e) }>Eliminar grupo</button>\r\n                                }\r\n                            </Col>\r\n                            <Col>\r\n                                {\r\n                                    flagCreateGroup ?\r\n                                        <button onClick={e => cancelGroup(e) }>Cancelar</button>\r\n                                    :\r\n                                        <button onClick={ e => addGroupModal(e) }>Crear Grupo</button>\r\n                                }\r\n                            </Col>\r\n                        </Row>\r\n                        <Row>\r\n                            <Col onDrop={(e) => dropUnidades(e)} onDragOver={(e) => allowDrop(e)}>\r\n                                <Card>\r\n                                    <Card.Header>Unidades Disponibles</Card.Header>\r\n                                    <Card.Body style={{ maxHeight:\"500px\", overflowY:\"auto\"}} >\r\n                                        <Card.Title><input onChange={ e => buscarUnidad(e) } id=\"inputGroup-sizing-sm\" className=\"inputBlack\" /><FaSearch /></Card.Title>\r\n                                        <div id=\"UnidadesDiv\">\r\n                                            {\r\n                                                unidadesModal.map(unidad => (\r\n                                                    <div \r\n                                                        key={\"U\" + unidad.id} \r\n                                                        id={unidad.id} \r\n                                                        draggable=\"true\" \r\n                                                        style={{cursor: \"pointer\", borderStyle:\"outset\", marginTop:\"5px\"}} \r\n                                                        onDragStart={e => drag(e)} \r\n                                                    >\r\n                                                        <span><FaLock size={20} /> Unidad: {unidad.nm}</span>\r\n                                                        <input className=\"checbokUnidad\" type=\"checkbox\"  />\r\n                                                        <br></br>\r\n                                                    </div>\r\n                                                ))\r\n                                            }\r\n                                        </div>\r\n                                    </Card.Body>\r\n                                </Card>\r\n                            </Col>\r\n                            <Col onDrop={(e) => drop(e)} onDragOver={(e) => allowDrop(e)}>\r\n                                <Card >\r\n                                    <Card.Header>Unidades Grupo: {tituloGrupo}</Card.Header>\r\n                                    <Card.Body style={{ maxHeight:\"500px\", overflowY:\"auto\"}} >\r\n                                        <div id=\"GrupoDiv\" >\r\n                                            {\r\n                                                unidadesGrupo.map(unidad => (\r\n                                                    <div \r\n                                                        key={\"G\"+unidad} \r\n                                                        id={unidad} \r\n                                                        draggable=\"true\" \r\n                                                        style={{cursor: \"pointer\", borderStyle:\"outset\", marginTop:\"5px\"}} \r\n                                                        onDragStart={e => drag(e)} \r\n                                                    >\r\n                                                        <span><FaLock size={20} /> Unidad: {(unidades.filter(unidad2 => unidad === unidad2.id))[0].nm}</span>\r\n                                                        <input className=\"checbokUnidad\" id={\"checbokUnidadGrupo\"+unidad} type=\"checkbox\"  />\r\n                                                        <br></br>\r\n                                                    </div>\r\n                                                ))\r\n                                            }\r\n                                        </div>\r\n                                    </Card.Body>\r\n                                    <Card.Footer>\r\n                                        {\r\n                                            flagCreateGroup ?\r\n                                                <button style={{float:\"right\"}} onClick={e => addGroup(e)}>Guardar grupo</button>\r\n                                            :\r\n                                                <button style={{float:\"right\"}} onClick={e => addUnitsGroup(e)}>Guardar</button>\r\n                                        }\r\n                                    </Card.Footer>\r\n                                </Card>\r\n                            </Col>\r\n                        </Row>\r\n                        </Container>\r\n                </Card.Body>\r\n                <Card.Footer className=\"text-muted\">Intralix</Card.Footer>\r\n            </Card>\r\n            {\r\n                loadingEquipos ?\r\n                    <Container className=\"popoverPanale\">\r\n                        <Spinner animation=\"border\" role=\"status\" style={{margin: \"50px\"}}>\r\n                            <span className=\"sr-only\">Loading...</span>\r\n                        </Spinner>\r\n                    </Container>\r\n                :\r\n                    null\r\n            }\r\n            {\r\n                cofirmDelete ? \r\n                    <Container className=\"popoverPanale\">\r\n                        <Card style={{ width: '18rem', marginTop:\"10px\" }}>\r\n                            <Card.Body>\r\n                                <Card.Text>Se eliminara el grupo <b>{tituloGrupo}</b></Card.Text>\r\n                                <button style={{float:\"right\"}} onClick={ e => deleteGroup(e) } >Confirmar</button>\r\n                                <button style={{float:\"left\"}} onClick={ e => cancelDelete(e) }>Cancelar</button>\r\n                            </Card.Body>\r\n                        </Card>\r\n                    </Container>\r\n                :\r\n                    null\r\n            }\r\n        </Main>     \r\n    );\r\n}\r\n \r\nexport default Equipos;\r\n","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Reglas\\Reglas.js",["157","158","159","160","161","162","163","164","165"],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\reducers\\index.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Main.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\MenuAcciones.js",["166"],"import React, { useState } from 'react';\r\nimport { ProSidebar, SidebarHeader, SidebarContent, SidebarFooter } from 'react-pro-sidebar';\r\nimport { FaLock, FaArrowAltCircleDown, FaSearch } from 'react-icons/fa';\r\nimport { Accordion, Card, Button, InputGroup, FormControl } from 'react-bootstrap';\r\nimport 'react-pro-sidebar/dist/css/styles.css';\r\nimport { useSelector } from \"react-redux\";\r\nimport Swal from 'sweetalert2';\r\n\r\nconst MenuAcciones = ({grupos, positionCurrentMarket}) => {\r\n  grupos = grupos.filter(grupo => grupo.d.u.length > 0);\r\n  const Toast = Swal.mixin({\r\n    toast: true,\r\n    position: 'top-end',\r\n    showConfirmButton: false,\r\n    timer: 3000,\r\n    timerProgressBar: true,\r\n    didOpen: (toast) => {\r\n      toast.addEventListener('mouseenter', Swal.stopTimer)\r\n      toast.addEventListener('mouseleave', Swal.resumeTimer)\r\n    }\r\n  })\r\n\r\n  let unidades = useSelector(state => state.unidades.unidades);\r\n  const [gruposModal, setGruposModal] = useState(grupos);\r\n  const wialonObject = useSelector(state => state.usuario.user);\r\n\r\n  const buscarUnidad = e => {\r\n    e.preventDefault();\r\n    const nombre = e.target.value.toUpperCase();\r\n    const arrayGrupos = [];\r\n    let tempGrupos = grupos;\r\n    tempGrupos.forEach(grupo => {\r\n      const arrayunidades = [];\r\n      grupo.d.u.forEach(unidadGrupo => {\r\n        unidades.forEach(unidad => {\r\n          if (unidadGrupo === unidad.id) {\r\n            if(unidad.nm.toUpperCase().search(nombre) !== -1){\r\n              arrayunidades.push(unidadGrupo);\r\n            }\r\n          }\r\n        });\r\n      });\r\n      arrayGrupos.push({\r\n        f: grupo.f,\r\n        i: grupo.i,\r\n        d:{\r\n          cls: grupo.d.cls,\r\n          id:grupo.d.id,\r\n          mu: grupo.d.mu,\r\n          nm: grupo.d.nm,\r\n          u:arrayunidades\r\n        }\r\n      });\r\n    });\r\n    setGruposModal(arrayGrupos);\r\n  }\r\n  const addDevice = e => {\r\n    var total=document.getElementsByName(e.target.id).length;\r\n    for(var i=0;i<total;i++){\r\n      document.getElementsByName(e.target.id)[i].checked = e.target.checked;\r\n    }\r\n    //agregar unidades\r\n  }\r\n  const addAllDevices = (e,grupo) => {\r\n    console.log(grupo);\r\n    grupo.d.u.map(unidad => {\r\n      var total=document.getElementsByName(unidad + \"checkbox\").length;\r\n      for(var i=0;i<total;i++){\r\n        document.getElementsByName(unidad + \"checkbox\")[i].checked = e.target.checked;\r\n      }\r\n    })\r\n  }\r\n\r\n  const cmdAlert = (e,comandoString) => {\r\n    e.preventDefault();\r\n    console.log(comandoString);\r\n    const arrayU = [];\r\n    const arrayUID = [];\r\n    let stringU = \"\";\r\n    unidades.forEach(unidad => {\r\n      const chek = document.getElementById(unidad.id+\"checkbox\").checked;\r\n      console.log(chek)\r\n      if (chek) {\r\n        arrayUID.push(unidad.id);\r\n        arrayU.push(unidad.nm);\r\n        stringU +=unidad.nm+\"<br/>\"\r\n      }\r\n    });\r\n    console.log(arrayU);\r\n    if (arrayU.length > 0) {\r\n      Swal.fire({\r\n        title: `Quieres enviar el comando ${comandoString}?`,\r\n        html: `${stringU}`,\r\n        showDenyButton: true,\r\n        showCancelButton: true,\r\n        confirmButtonColor: '#cc3300',\r\n        focusConfirm: false,\r\n        confirmButtonText: `Enviar`,\r\n      }).then((result) => {\r\n        console.log(result)\r\n        if (result.value) {\r\n          //Swal.fire('Comando enviado!', '', 'success')\r\n          Swal.fire('Enviando comando', '', '')\r\n          cmd(arrayUID,comandoString);\r\n          Swal.showLoading();\r\n        } else if (result.dismiss) {\r\n          Swal.fire(`No se envio el comando ${comandoString}`, '', 'info')\r\n        }\r\n      })\r\n    }else{\r\n      Toast.fire({\r\n        type: 'warning',\r\n        title: 'Seleccione al menos una unidad'\r\n      })\r\n    }\r\n    \r\n  }\r\n  const cmd = (arrayUID,comandoString) => {\r\n    wialonObject.enviarComando(arrayUID,comandoString,function(data,arrayError) {\r\n      console.log(data);\r\n      if (data.error) {\r\n        Swal.fire('No se envio el comando', '', 'warning')\r\n      } else {\r\n        if (arrayError.length) {\r\n          let unidadesError = \"\";\r\n          arrayError.forEach(unidad => {\r\n            unidadesError +=unidad+\"<br/>\"\r\n          });\r\n          Swal.fire('No se envio el comando a las unidades', unidadesError, 'warning')\r\n        } else {\r\n          Swal.fire('Comando enviado', '', 'success')\r\n        }\r\n      }\r\n    });\r\n  }\r\n  return (\r\n      <>\r\n      <ProSidebar className='sidebaracciones' >\r\n        <SidebarHeader>\r\n          <div className='sidebarMNHeader' >\r\n            <Button variant=\"outline-success\" onClick={ e => cmdAlert(e,\"Posición\") } >Abrir</Button>{' '}\r\n            <Button variant=\"outline-primary\" onClick={ e => cmdAlert(e,\"Posición\") } >Restablecer</Button>{' '}\r\n            <Button variant=\"outline-warning\" onClick={ e => cmdAlert(e,\"Posición\") } >Cerrar</Button>{' '}\r\n            <br></br><br></br>\r\n            <InputGroup onChange={ buscarUnidad } size=\"sm\" className=\"mb-3\">\r\n              <InputGroup.Prepend>\r\n              <InputGroup.Text id=\"inputGroup-sizing-sm\" className=\"iconBuscar\" ><FaSearch /></InputGroup.Text>\r\n              </InputGroup.Prepend>\r\n              <FormControl aria-label=\"Small\" aria-describedby=\"inputGroup-sizing-sm\" />\r\n            </InputGroup>\r\n          </div>\r\n        </SidebarHeader>\r\n        <SidebarContent>\r\n          {/**Acordeon que me acumula todo un grupo */}\r\n          {\r\n            gruposModal.map(grupo => (\r\n                grupo.d.u.length > 0 ? \r\n                  (\r\n                    <Accordion key={grupo.d.id + \"G\"} defaultActiveKey=\"0\">\r\n                      <Card>\r\n                          <Card.Header >\r\n                              <Accordion.Toggle as={Button} variant=\"link\" eventKey=\"1\">\r\n                                  <FaArrowAltCircleDown />{grupo.d.nm}\r\n                              </Accordion.Toggle>\r\n                              <input className=\"checbokGroup\" type=\"checkbox\" id={grupo.d.id + \"checkbox\"} onChange={ (e) => addAllDevices(e,grupo) } />\r\n                          </Card.Header>\r\n                          <Accordion.Collapse eventKey=\"1\">\r\n                              {/**Todas las unidades del grupo */}\r\n                              <Card.Body style={{padding: \"10px 10px 10px 20px\", color: \"#000000\"}}>\r\n                                {\r\n                                  grupo.d.u.map(unidad => (\r\n                                    <span key={unidad + \"MA\"} style={{cursor: \"pointer\"}} onClick={ () => positionCurrentMarket(unidad)}>\r\n                                      <span><FaLock size={20} /> Unidad: {  (unidades.filter(unidad2 => unidad === unidad2.id))[0].nm  }</span>\r\n                                      <input className=\"checbokUnidad\" type=\"checkbox\" id={unidad + \"checkbox\"} name={unidad + \"checkbox\"} onChange={ e => addDevice(e) } />\r\n                                      <br></br>\r\n                                    </span>\r\n                                  ))\r\n                                }\r\n                              </Card.Body>\r\n                          </Accordion.Collapse>\r\n                      </Card>\r\n                    </Accordion>\r\n                  )\r\n                  :\r\n                    null\r\n            ))\r\n          }\r\n        </SidebarContent>\r\n        <SidebarFooter>\r\n          <div className=\"sidebar-btn-wrapper sidebarMNFooter\" >\r\n            <h2>Alertas</h2>\r\n            <p style={{color: \"red\"}}>Unidad: 25789  Sistema violado</p>\r\n            <p style={{color: \"green\"}}>Unidad: 25789  Chapa abierta</p>\r\n            <p style={{color: \"orange\"}}>unidad: 25789  Chapa cerrada</p>\r\n          </div>\r\n        </SidebarFooter>\r\n      </ProSidebar>\r\n     \r\n      </>\r\n    );\r\n}\r\n \r\nexport default MenuAcciones;","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\MapaOSM.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Reglas\\Jobs.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Reglas\\NuevaRegla.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Reglas\\EditarRegla.js",["167"],"import React, { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Card, Container, Row, Col, Table, Form } from 'react-bootstrap';\r\nimport DatePicker from \"react-datepicker\";\r\nimport { updateJobAction } from \"../../store/actions/tareasActions\";\r\n\r\nconst EditarRegla = ({jobId,setEditarRegla}) => {\r\n    const dispatch = useDispatch();\r\n    const jobs = useSelector(state => state.tareas.tareas);\r\n    const job = jobs.filter(job => job.id === parseInt(jobId))[0];\r\n    const [nombreTarea, setNombreRegla] = useState(\"\")\r\n    const [startDateHora, setStartDateHora] = useState(new Date());\r\n    const [startDate, setStartDate] = useState(new Date());\r\n    const [toggleDate, setToggleDate] = useState(true);\r\n    const wialonObject = useSelector(state => state.usuario.user);\r\n    useEffect(() => {\r\n        if (job !== undefined && job !== null) {\r\n            setNombreRegla(job.nombre);\r\n            setStartDateHora(new Date(\"0 \"+job.hora));\r\n\r\n            document.getElementById(\"SelectComandoEditarRegla\").value  = \"Cerrar\";\r\n            if (job.dias.length > 0) {\r\n                setToggleDate(true);\r\n                job.dias.forEach(dia => {\r\n                    document.getElementById(\"EditarReglaCheckbox\"+dia).checked = true;\r\n                });\r\n            }else{\r\n                setToggleDate(false);\r\n                setStartDate(new Date(job.fecha));\r\n            }\r\n        }\r\n    }, []);\r\n    const updateJob = (e) => {\r\n        e.preventDefault();\r\n        const Hora = addZero(startDateHora.getHours())+\":\"+addZero(startDateHora.getMinutes())\r\n        const nuevaTarea = {\r\n            jobId,\r\n            nombreTarea,\r\n            Hora,\r\n            arrayNuevosDias:null,\r\n            fecha:null\r\n        }\r\n        console.log(jobId);\r\n        console.log(nombreTarea);\r\n        console.log(addZero(startDateHora.getHours())+\":\"+addZero(startDateHora.getMinutes()));\r\n        console.log(toggleDate);\r\n        if (toggleDate) {\r\n            //dias\r\n            const arrayNuevosDias = [];\r\n            if(document.getElementById(\"EditarReglaCheckboxLunes\").checked)  arrayNuevosDias.push(\"Lunes\");\r\n            if(document.getElementById(\"EditarReglaCheckboxMartes\").checked)  arrayNuevosDias.push(\"Martes\");\r\n            if(document.getElementById(\"EditarReglaCheckboxMiercoles\").checked)  arrayNuevosDias.push(\"Miercoles\");\r\n            if(document.getElementById(\"EditarReglaCheckboxJueves\").checked)  arrayNuevosDias.push(\"Jueves\");\r\n            if(document.getElementById(\"EditarReglaCheckboxViernes\").checked)  arrayNuevosDias.push(\"Viernes\");\r\n            if(document.getElementById(\"EditarReglaCheckboxSabado\").checked)  arrayNuevosDias.push(\"Sabado\");\r\n            if(document.getElementById(\"EditarReglaCheckboxDomingo\").checked)  arrayNuevosDias.push(\"Domingo\");\r\n            console.log(arrayNuevosDias);\r\n            nuevaTarea.arrayNuevosDias=arrayNuevosDias;\r\n        } else {\r\n            //fecha exacta\r\n            console.log(startDate)\r\n            const fecha  = startDate.getTime()/1000;\r\n            console.log(fecha);\r\n            nuevaTarea.fecha = fecha;\r\n        }\r\n        console.log(nuevaTarea);\r\n        dispatch( updateJobAction(jobId,nuevaTarea,wialonObject) );\r\n    }\r\n    function addZero(i){\r\n        if (i < 10) {\r\n            i = \"0\" + i;\r\n        }\r\n        return i;\r\n    }\r\n    return (\r\n        <>\r\n            {\r\n                job !== undefined && job !== null ?\r\n                    <Container className=\"\">\r\n                        <Card >\r\n                            <Card.Body>\r\n                                <Card.Text>{job.nombre}</Card.Text>\r\n                                <Row>\r\n                                    <Col xs lg=\"4\">\r\n                                        <input id=\"\" style={{inlineSize:\"inherit\"}} className=\"inputBlack\" placeholder=\"Nombre\" onChange={e => setNombreRegla(e.target.value)} value={nombreTarea} />\r\n                                    </Col>\r\n                                    <Col xs lg=\"4\">\r\n                                        <DatePicker\r\n                                            className=\"inputBlack\"\r\n                                            selected={startDateHora}\r\n                                            onChange={date => setStartDateHora(date)}\r\n                                            showTimeSelect\r\n                                            showTimeSelectOnly\r\n                                            timeIntervals={15}\r\n                                            timeCaption=\"Time\"\r\n                                            dateFormat=\"HH:mm\"\r\n                                        />\r\n                                    </Col>\r\n                                    <Col xs lg=\"4\">\r\n                                        <Form>\r\n                                            <Form.Group controlId=\"SelectComandoEditarRegla\">\r\n                                                <Form.Control as=\"select\" custom>\r\n                                                    <option>Abrir</option>\r\n                                                    <option>Cerrar</option>\r\n                                                    <option>Restablecer</option>\r\n                                                </Form.Control>\r\n                                            </Form.Group>\r\n                                        </Form>\r\n                                    </Col>\r\n                                </Row>\r\n                                <label className=\"switch\">\r\n                                    <input type=\"checkbox\" onChange={ () => setToggleDate(!toggleDate) } />\r\n                                    <span className=\"slider round\"></span>\r\n                                </label>\r\n                                <br></br>\r\n                                {\r\n                                    toggleDate ?\r\n                                        <Table responsive=\"sm\">\r\n                                        <thead>\r\n                                            <tr>\r\n                                                <th>Lun</th>\r\n                                                <th>Mar</th>\r\n                                                <th>Mie</th>\r\n                                                <th>Jue</th>\r\n                                                <th>Vie</th>\r\n                                                <th>Sab</th>\r\n                                                <th>Dom</th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n                                            <tr>\r\n                                                <td><input className=\"checbokDias\" type=\"checkbox\" id=\"EditarReglaCheckboxLunes\"  /></td>\r\n                                                <td><input className=\"checbokDias\" type=\"checkbox\" id=\"EditarReglaCheckboxMartes\"  /></td>\r\n                                                <td><input className=\"checbokDias\" type=\"checkbox\" id=\"EditarReglaCheckboxMiercoles\"  /></td>\r\n                                                <td><input className=\"checbokDias\" type=\"checkbox\" id=\"EditarReglaCheckboxJueves\"  /></td>\r\n                                                <td><input className=\"checbokDias\" type=\"checkbox\" id=\"EditarReglaCheckboxViernes\"  /></td>\r\n                                                <td><input className=\"checbokDias\" type=\"checkbox\" id=\"EditarReglaCheckboxSabado\"  /></td>\r\n                                                <td><input className=\"checbokDias\" type=\"checkbox\" id=\"EditarReglaCheckboxDomingo\"  /></td>\r\n                                            </tr>\r\n                                        </tbody>\r\n                                    </Table>\r\n                                    :\r\n                                    <DatePicker\r\n                                        className=\"inputBlack\"\r\n                                        selected={startDate}\r\n                                        onChange={date => setStartDate(date)}\r\n                                    />\r\n                                }\r\n                                <br></br><br></br><br></br>\r\n                                <button onClick={ () => setEditarRegla(false) } style={{float:\"left\"}} >Cancelar</button>\r\n                                <button onClick={ (e) => updateJob(e) } style={{float:\"right\"}} >Agregar</button>\r\n                            </Card.Body>\r\n                        </Card>\r\n                    </Container>\r\n                :\r\n                    null\r\n            }\r\n        </>\r\n    );\r\n}\r\n\r\nexport default EditarRegla;","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Reglas\\VerUnidades.js",["168","169","170","171"],"import React, { useState } from 'react';\r\nimport { Card, Container, Row, Col } from 'react-bootstrap';\r\nimport { FaLock, FaSearch } from 'react-icons/fa';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { updateUnitsJobsAction } from \"../../store/actions/tareasActions\";\r\n\r\nconst VerUnidades = ({setVerunidades,jobId}) => {\r\n\r\n    let unidades = useSelector(state => state.unidades.unidades);\r\n    let CMDS = useSelector(staet => staet.CMDS.unidadesCMDS);\r\n    const jobs = useSelector(state => state.tareas.tareas)\r\n    const job = jobs.filter(job => job.id === parseInt(jobId));\r\n    const [unidadesJobs,setUnidadesJobs] = useState(job[0].unidades);\r\n    const dispatch = useDispatch();\r\n    const unidadesFiltradas = () => {\r\n        const currentCMDS = [];\r\n        CMDS.map(unidadcmds => {\r\n            const Ccmds = unidadcmds.cmds.filter(cmd => cmd.n === job[0].comando && cmd.c === job[0].comandoTipo);\r\n            if (Ccmds.length > 0) {\r\n                currentCMDS.push({id:unidadcmds.id,nm:unidadcmds.n});\r\n            }\r\n        })\r\n        console.log(currentCMDS);\r\n        return currentCMDS;\r\n        \r\n    };\r\n    const unidadesFinal = unidadesFiltradas();\r\n    const [unidadesModal,setUnidadesModal] = useState(unidadesFiltradas());\r\n    const wialonObject = useSelector(state => state.usuario.user);\r\n\r\n    const buscarUnidadModal = e => {\r\n        e.preventDefault();\r\n        const nombre = e.target.value.toUpperCase();\r\n        let arrayUnidades = [];\r\n        unidadesFinal.map(unidad => {\r\n            if(unidad.nm.toUpperCase().search(nombre) !== -1)\r\n            {\r\n                arrayUnidades.push({\r\n                    id: unidad.id,\r\n                    nm: unidad.nm\r\n                })\r\n            }\r\n        });\r\n        console.log(arrayUnidades);\r\n        setUnidadesModal(arrayUnidades);\r\n    }\r\n    const drag = e => {\r\n        e.dataTransfer.setData(\"text\", e.target.id);\r\n    }\r\n    const allowDrop = e => {\r\n        e.preventDefault();\r\n    }\r\n    const drop = e => {\r\n        e.preventDefault();\r\n        const data = e.dataTransfer.getData(\"text\");\r\n        console.log(unidadesJobs);\r\n        var repite = unidadesJobs.filter(unidad => parseInt(data) === unidad );\r\n        console.log(repite);\r\n        if (repite.length <= 0) {\r\n            setUnidadesJobs([...unidadesJobs,parseInt(data)]);\r\n        }\r\n        console.log(unidades);\r\n        unidades.map(unidadJob => {\r\n            const UC = document.getElementById(\"checboxUnidad\" + unidadJob.id);\r\n            if (UC !== null) {\r\n                console.log(UC);\r\n                if (UC.checked) {\r\n                    repite = unidadesJobs.filter(unidad => parseInt(unidadJob.id) === unidad );\r\n                    if (repite.length <= 0) {\r\n                        setUnidadesJobs([...unidadesJobs,parseInt(unidadJob.id)]);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    const dropUnidades = e => {\r\n        e.preventDefault();\r\n        \r\n        const data = e.dataTransfer.getData(\"text\");\r\n        let newGrupo = unidadesJobs.filter(grupo => grupo !== parseInt(data) )\r\n        unidadesJobs.map(unidad => {\r\n            const UC = document.getElementById(\"checboxUnidadJob\" + unidad).checked;\r\n            if (UC) {\r\n                newGrupo = newGrupo.filter(grupo => grupo !== parseInt(unidad) )\r\n            }\r\n        });\r\n        setUnidadesJobs(newGrupo);\r\n        \r\n    }\r\n\r\n    const guardarUnidadesTareas = e => {\r\n        e.preventDefault();\r\n        console.log(unidadesJobs);\r\n        console.log(jobId);\r\n        dispatch( updateUnitsJobsAction( jobId,unidadesJobs.join(),wialonObject ) );\r\n        \r\n    }\r\n    return ( \r\n        <Container className=\"popoverPanale\">\r\n            <Card style={{ width: '50rem', marginTop:\"10px\" }}>\r\n                <Card.Body>\r\n                    {/** */}\r\n                    <Row>\r\n                        <Col onDrop={(e) => dropUnidades(e)} onDragOver={(e) => allowDrop(e)}>\r\n                            <Card>\r\n                                <Card.Header>Unidades disponibles</Card.Header>\r\n                                <Card.Body style={{ maxHeight:\"500px\", overflowY:\"auto\"}} >\r\n                                    <Card.Title><input onChange={ e => buscarUnidadModal(e) } id=\"inputGroup-sizing-sm\" className=\"inputBlack\" /><FaSearch /></Card.Title>\r\n                                    <div id=\"UnidadesDiv\">\r\n                                        {\r\n                                            unidadesModal.map(unidad => (\r\n                                                <div \r\n                                                    key={\"Reglas_U\" + unidad.id} \r\n                                                    id={unidad.id} \r\n                                                    draggable=\"true\" \r\n                                                    style={{cursor: \"pointer\", borderStyle:\"outset\", marginTop:\"5px\"}} \r\n                                                    onDragStart={e => drag(e)}     \r\n                                                >\r\n                                                    <span><FaLock size={20} /> Unidad: {unidad.nm}</span>\r\n                                                    <input className=\"checbokUnidad\" id={\"checboxUnidad\"+unidad.id} type=\"checkbox\"  />\r\n                                                    <br></br>\r\n                                                </div>\r\n                                            ))\r\n                                        }\r\n                                    </div>\r\n                                </Card.Body>\r\n                            </Card>\r\n                        </Col>\r\n                        <Col onDrop={(e) => drop(e)} onDragOver={(e) => allowDrop(e)}>\r\n                            <Card >\r\n                                <Card.Header>Unidades tarea</Card.Header>\r\n                                <Card.Body style={{ maxHeight:\"500px\", overflowY:\"auto\"}} >\r\n                                    <div id=\"GrupoDiv\" >\r\n                                        {\r\n                                            unidadesJobs.map(unidad => (\r\n                                                <div \r\n                                                    key={\"Reglas_J\"+unidad} \r\n                                                    id={unidad} \r\n                                                    draggable=\"true\" \r\n                                                    style={{cursor: \"pointer\", borderStyle:\"outset\", marginTop:\"5px\"}}\r\n                                                    onDragStart={e => drag(e)} \r\n                                                >\r\n                                                    <span><FaLock size={20} /> Unidad: {\r\n                                                        \r\n                                                        unidades.filter(unidadG => (unidadG.id === unidad))[0].nm\r\n                                                    }</span>\r\n                                                    <input className=\"checbokUnidad\" id={\"checboxUnidadJob\"+unidad} type=\"checkbox\"  />\r\n                                                    <br></br>\r\n                                                </div>\r\n                                            ))\r\n                                        }\r\n                                    </div>\r\n                                </Card.Body>\r\n                            </Card>\r\n                        </Col>\r\n                    </Row>\r\n                    {/** */}\r\n                </Card.Body>\r\n                <Card.Footer>\r\n                        <button style={{float:\"right\"}} onClick={e => guardarUnidadesTareas(e)}>Guardar</button>\r\n                        <button style={{float:\"right\"}} onClick={() => setVerunidades(false)}>Cancelar</button>\r\n                </Card.Footer>\r\n            </Card>\r\n        </Container>\r\n     );\r\n}\r\n \r\nexport default VerUnidades;","C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\actions\\usuarioActions.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\services\\AuthService.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\actions\\tareasActions.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\actions\\unidadesActions.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\actions\\CMDSActions.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\actions\\gruposActions.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\wialon\\session.js",["172","173"],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\reducers\\usuarioReducer.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\reducers\\tareasReducer.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\reducers\\unidadesReducer.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\reducers\\gruposReducer.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\reducers\\CMDSReducer.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\components\\DesktopContainer.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\UnidadesMapa.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\config\\errores.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\store\\types\\index.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\pages\\Menu.js",[],"C:\\Users\\Oscar Perez\\Documents\\trabajo\\chapas\\wialon_api_main\\src\\config\\CMDS.js",[],{"ruleId":"174","replacedBy":"175"},{"ruleId":"176","replacedBy":"177"},{"ruleId":"178","severity":1,"message":"179","line":20,"column":5,"nodeType":"180","endLine":20,"endColumn":7,"suggestions":"181"},{"ruleId":"182","severity":1,"message":"183","line":69,"column":15,"nodeType":"184","endLine":69,"endColumn":38},{"ruleId":"178","severity":1,"message":"185","line":31,"column":8,"nodeType":"180","endLine":31,"endColumn":16,"suggestions":"186"},{"ruleId":"187","severity":1,"message":"188","line":42,"column":34,"nodeType":"189","messageId":"190","endLine":42,"endColumn":36},{"ruleId":"187","severity":1,"message":"188","line":58,"column":34,"nodeType":"189","messageId":"190","endLine":58,"endColumn":36},{"ruleId":"187","severity":1,"message":"188","line":120,"column":33,"nodeType":"189","messageId":"190","endLine":120,"endColumn":35},{"ruleId":"191","severity":1,"message":"192","line":19,"column":11,"nodeType":"193","messageId":"194","endLine":19,"endColumn":18},{"ruleId":"187","severity":1,"message":"195","line":24,"column":41,"nodeType":"189","messageId":"196","endLine":24,"endColumn":43},{"ruleId":"187","severity":1,"message":"195","line":25,"column":52,"nodeType":"189","messageId":"196","endLine":25,"endColumn":54},{"ruleId":"191","severity":1,"message":"197","line":52,"column":12,"nodeType":"193","messageId":"194","endLine":52,"endColumn":29},{"ruleId":"198","severity":1,"message":"199","line":76,"column":21,"nodeType":"193","messageId":"200","endLine":76,"endColumn":26},{"ruleId":"198","severity":1,"message":"201","line":77,"column":25,"nodeType":"193","messageId":"200","endLine":77,"endColumn":26},{"ruleId":"198","severity":1,"message":"199","line":97,"column":29,"nodeType":"193","messageId":"200","endLine":97,"endColumn":34},{"ruleId":"198","severity":1,"message":"201","line":98,"column":33,"nodeType":"193","messageId":"200","endLine":98,"endColumn":34},{"ruleId":"187","severity":1,"message":"188","line":158,"column":30,"nodeType":"189","messageId":"190","endLine":158,"endColumn":32},{"ruleId":"187","severity":1,"message":"188","line":66,"column":26,"nodeType":"189","messageId":"190","endLine":66,"endColumn":28},{"ruleId":"178","severity":1,"message":"202","line":32,"column":8,"nodeType":"180","endLine":32,"endColumn":10,"suggestions":"203"},{"ruleId":"187","severity":1,"message":"188","line":17,"column":29,"nodeType":"189","messageId":"190","endLine":17,"endColumn":31},{"ruleId":"187","severity":1,"message":"188","line":35,"column":34,"nodeType":"189","messageId":"190","endLine":35,"endColumn":36},{"ruleId":"187","severity":1,"message":"188","line":63,"column":32,"nodeType":"189","messageId":"190","endLine":63,"endColumn":34},{"ruleId":"187","severity":1,"message":"188","line":81,"column":33,"nodeType":"189","messageId":"190","endLine":81,"endColumn":35},{"ruleId":"191","severity":1,"message":"204","line":196,"column":27,"nodeType":"193","messageId":"194","endLine":196,"endColumn":36},{"ruleId":"191","severity":1,"message":"204","line":256,"column":27,"nodeType":"193","messageId":"194","endLine":256,"endColumn":36},"no-native-reassign",["205"],"no-negated-in-lhs",["206"],"react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'dispatch' and 'history'. Either include them or remove the dependency array.","ArrayExpression",["207"],"jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","React Hook useEffect has missing dependencies: 'cofirmDelete' and 'loadingEquipos'. Either include them or remove the dependency array.",["208"],"array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","no-unused-vars","'usuario' is assigned a value but never used.","Identifier","unusedVar","Array.prototype.map() expects a value to be returned at the end of arrow function.","expectedAtEnd","'comandoNuevaRegla' is assigned a value but never used.","no-redeclare","'total' is already defined.","redeclared","'i' is already defined.","React Hook useEffect has a missing dependency: 'job'. Either include it or remove the dependency array.",["209"],"'creatorId' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"210","fix":"211"},{"desc":"212","fix":"213"},{"desc":"214","fix":"215"},"Update the dependencies array to be: [dispatch, history]",{"range":"216","text":"217"},"Update the dependencies array to be: [cofirmDelete, grupos, loadingEquipos]",{"range":"218","text":"219"},"Update the dependencies array to be: [job]",{"range":"220","text":"221"},[527,529],"[dispatch, history]",[1566,1574],"[cofirmDelete, grupos, loadingEquipos]",[1459,1461],"[job]"]